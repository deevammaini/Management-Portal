{"ast":null,"code":"import _objectSpread from\"C:/Users/YSXP/Desktop/New folder/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{Plus,Users,Target,Calendar,MapPin,Mail,Phone,Building,User,Clock,CheckCircle,AlertCircle,Edit,Trash2,Eye,Filter,ChevronDown,Send,Bell,FileText,TrendingUp,BarChart3,X}from'lucide-react';import{apiCall}from'../utils/api';import{useSocket}from'../contexts/SocketContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const GenerateLeadsView=_ref=>{let{showNotification,user,isEmployee=false}=_ref;const socket=useSocket();// Helper function to format datetime strings\nconst formatDateTime=dateTimeString=>{if(!dateTimeString)return'Not available';console.log('Formatting datetime:',dateTimeString,'Type:',typeof dateTimeString);try{// Handle different possible formats\nlet date,time;if(typeof dateTimeString==='string'){if(dateTimeString.includes(' ')){// Format: YYYY-MM-DD HH:MM:SS\n[date,time]=dateTimeString.split(' ');}else if(dateTimeString.includes('T')){// Format: YYYY-MM-DDTHH:MM:SS\n[date,time]=dateTimeString.split('T');}else{// Try to parse as a date string\nconst parsedDate=new Date(dateTimeString);if(!isNaN(parsedDate.getTime())){const year=parsedDate.getFullYear();const month=String(parsedDate.getMonth()+1).padStart(2,'0');const day=String(parsedDate.getDate()).padStart(2,'0');const hours=String(parsedDate.getHours()).padStart(2,'0');const minutes=String(parsedDate.getMinutes()).padStart(2,'0');const seconds=String(parsedDate.getSeconds()).padStart(2,'0');return\"\".concat(month,\"/\").concat(day,\"/\").concat(year,\", \").concat(hours,\":\").concat(minutes,\":\").concat(seconds);}return'Invalid format';}if(date&&time){const[year,month,day]=date.split('-');const[hours,minutes,seconds]=time.split(':');if(year&&month&&day&&hours&&minutes&&seconds){return\"\".concat(month,\"/\").concat(day,\"/\").concat(year,\", \").concat(hours,\":\").concat(minutes,\":\").concat(seconds);}}}return'Invalid format';}catch(error){console.error('Error formatting datetime:',error);return'Format error';}};const[leads,setLeads]=useState([]);const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const[showAssignModal,setShowAssignModal]=useState(false);const[showEmailModal,setShowEmailModal]=useState(false);const[companies,setCompanies]=useState([]);const[scheduledEmails,setScheduledEmails]=useState([]);const[showAddCompanyModal,setShowAddCompanyModal]=useState(false);const[showScheduleEmailModal,setShowScheduleEmailModal]=useState(false);const[selectedCompany,setSelectedCompany]=useState(null);const[companyForm,setCompanyForm]=useState({company_name:'',email:'',contact_person:'',phone:'',industry:'',website:'',email_type:'intro'});const[scheduleForm,setScheduleForm]=useState({scheduled_time:'',company_id:'',email_type:'intro'});const[selectedCompanies,setSelectedCompanies]=useState([]);const[industryFilter,setIndustryFilter]=useState('all');const[emailTypeFilter,setEmailTypeFilter]=useState('all');const[showBulkScheduleModal,setShowBulkScheduleModal]=useState(false);const[bulkScheduleForm,setBulkScheduleForm]=useState({scheduled_time:'',batch_size:10,batch_interval:10,email_type:'intro'});const[selectedLead,setSelectedLead]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('all');const[employeeFilter,setEmployeeFilter]=useState('all');const[sortBy,setSortBy]=useState('created_at');const[sortOrder,setSortOrder]=useState('desc');const[showProgressUpdates,setShowProgressUpdates]=useState(false);const[progressUpdates,setProgressUpdates]=useState([]);const[selectedLeadForUpdates,setSelectedLeadForUpdates]=useState(null);const fetchScheduledEmails=useCallback(async()=>{try{const emailsData=await apiCall('/api/admin/scheduled-emails');setScheduledEmails((emailsData===null||emailsData===void 0?void 0:emailsData.emails)||[]);}catch(error){console.error('Error fetching scheduled emails:',error);}},[setScheduledEmails]);// Form states\nconst[leadForm,setLeadForm]=useState({company_name:'',project_name:'',key_account_manager:'',project_coordinator:'',client_end_manager:'',client_email:'',client_phone:'',location:'',start_date:'',expected_project_start_date:'',last_interacted_date:'',lead_status:'new',lead_source:'',remarks:'',priority:'medium',estimated_value:'',industry:'',// Assignment fields\nassign_to_employee:false,employee_id:'',due_date:'',assignment_notes:''});const[assignEmployeeDetails,setAssignEmployeeDetails]=useState(null);const[loadingEmployeeDetails,setLoadingEmployeeDetails]=useState(false);const[assignForm,setAssignForm]=useState({employee_id:'',due_date:'',notes:''});const[employeeSearchMode,setEmployeeSearchMode]=useState('manual');// Only manual mode\nconst[employeeSearchId,setEmployeeSearchId]=useState('');const[searchedEmployee,setSearchedEmployee]=useState(null);useEffect(()=>{loadData();},[]);// Auto-search employee when ID is entered (client-side like tickets)\nuseEffect(()=>{if(employeeSearchId&&employees.length>0){const employee=employees.find(emp=>emp.employeeId===employeeSearchId);if(employee){setSearchedEmployee(employee);setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{employee_id:employee.id}));}else{setSearchedEmployee(null);setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{employee_id:''}));}}else{setSearchedEmployee(null);setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{employee_id:''}));}},[employeeSearchId,employees]);// WebSocket listeners for real-time email updates\nuseEffect(()=>{if(socket){// Listen for email status updates\nsocket.on('email_sent',data=>{console.log('ðŸ“§ Email sent notification:',data);// Refresh scheduled emails data\nfetchScheduledEmails();// Show success notification\nshowNotification({type:'success',message:\"Email sent successfully to \".concat(data.company_name,\"!\")});});socket.on('email_failed',data=>{console.log('âŒ Email failed notification:',data);// Refresh scheduled emails data\nfetchScheduledEmails();// Show error notification\nshowNotification({type:'error',message:\"Failed to send email to \".concat(data.company_name,\": \").concat(data.error_message)});});return()=>{socket.off('email_sent');socket.off('email_failed');};}},[socket,showNotification,fetchScheduledEmails]);// Fetch employee details when employee ID changes in assign form\nuseEffect(()=>{const fetchEmployeeDetails=async()=>{if(assignForm.employee_id&&assignForm.employee_id.trim()!==''){setLoadingEmployeeDetails(true);try{const response=await apiCall(\"/api/admin/employees/\".concat(assignForm.employee_id,\"/details\"),'GET');if(response&&response.name){setAssignEmployeeDetails(response);}else{setAssignEmployeeDetails(null);}}catch(error){console.error('Error fetching employee details:',error);setAssignEmployeeDetails(null);}finally{setLoadingEmployeeDetails(false);}}else{setAssignEmployeeDetails(null);}};fetchEmployeeDetails();},[assignForm.employee_id]);const loadData=async()=>{try{setLoading(true);if(isEmployee){// For employees, only load assigned leads\nconst leadsData=await apiCall(\"/api/employee/assigned-leads?employee_id=\".concat(user===null||user===void 0?void 0:user.id));console.log('ðŸ” Debug: Employee assigned leads data received:',leadsData);// The employee endpoint returns {success: true, leads: [...]}\nsetLeads((leadsData===null||leadsData===void 0?void 0:leadsData.leads)||[]);setEmployees([]);setCompanies([]);setScheduledEmails([]);}else{// For admins, load all data\nconst[leadsData,employeesData,companiesData,emailsData]=await Promise.all([apiCall('/api/admin/leads'),apiCall('/api/admin/employees'),apiCall('/api/admin/companies'),apiCall('/api/admin/scheduled-emails')]);console.log('ðŸ” Debug: Leads data received:',leadsData);console.log('ðŸ” Debug: Priority values:',leadsData===null||leadsData===void 0?void 0:leadsData.map(lead=>({id:lead.id,priority:lead.priority})));setLeads(leadsData||[]);setEmployees(employeesData||[]);setCompanies((companiesData===null||companiesData===void 0?void 0:companiesData.companies)||[]);setScheduledEmails((emailsData===null||emailsData===void 0?void 0:emailsData.emails)||[]);}}catch(error){console.error('Error loading data:',error);showNotification('Failed to load data','error');// Ensure arrays are never null\nsetLeads([]);setEmployees([]);setCompanies([]);setScheduledEmails([]);}finally{setLoading(false);}};// Company Management Functions\nconst handleCreateCompany=async e=>{e.preventDefault();try{await apiCall('/api/admin/companies',{method:'POST',body:JSON.stringify(companyForm)});showNotification('Company created successfully!','success');setShowAddCompanyModal(false);setCompanyForm({company_name:'',email:'',contact_person:'',phone:'',industry:'',website:''});loadData();}catch(error){console.error('Error creating company:',error);showNotification('Failed to create company','error');}};const handleDeleteCompany=async companyId=>{if(window.confirm('Are you sure you want to delete this company?')){try{await apiCall(\"/api/admin/companies/\".concat(companyId),{method:'DELETE'});showNotification('Company deleted successfully!','success');loadData();}catch(error){console.error('Error deleting company:',error);showNotification('Failed to delete company','error');}}};const handleScheduleEmail=async e=>{e.preventDefault();try{await apiCall('/api/admin/scheduled-emails',{method:'POST',body:JSON.stringify(scheduleForm)});showNotification('Email scheduled successfully!','success');setShowScheduleEmailModal(false);setScheduleForm({scheduled_time:'',company_id:''});loadData();}catch(error){console.error('Error scheduling email:',error);showNotification('Failed to schedule email','error');}};const handleCancelEmail=async emailId=>{if(window.confirm('Are you sure you want to cancel this scheduled email?')){try{await apiCall(\"/api/admin/scheduled-emails/\".concat(emailId),{method:'DELETE'});showNotification('Email cancelled successfully!','success');loadData();}catch(error){console.error('Error cancelling email:',error);showNotification('Failed to cancel email','error');}}};const handleSendEmailNow=async emailId=>{try{await apiCall(\"/api/admin/scheduled-emails/\".concat(emailId,\"/send-now\"),{method:'POST'});showNotification('Email sent successfully!','success');loadData();}catch(error){console.error('Error sending email:',error);showNotification('Failed to send email','error');}};const handleSendAllPendingEmails=async()=>{if(window.confirm('Are you sure you want to send all pending emails now?')){try{await apiCall('/api/admin/scheduled-emails/send-all-pending',{method:'POST'});showNotification('All pending emails sent successfully!','success');loadData();}catch(error){console.error('Error sending all emails:',error);showNotification('Failed to send emails','error');}}};const handleBulkScheduleEmails=async e=>{e.preventDefault();try{// If there's an attachment, use FormData and direct fetch\nif(bulkScheduleForm.attachment){const formData=new FormData();formData.append('company_ids',JSON.stringify(selectedCompanies));formData.append('scheduled_time',bulkScheduleForm.scheduled_time);formData.append('batch_size',bulkScheduleForm.batch_size.toString());formData.append('batch_interval',bulkScheduleForm.batch_interval.toString());formData.append('email_type',bulkScheduleForm.email_type||'intro');formData.append('attachment',bulkScheduleForm.attachment);const response=await fetch('http://localhost:8000/api/admin/scheduled-emails/bulk',{method:'POST',body:formData,credentials:'include'});const data=await response.json();if(data.success){const totalBatches=Math.ceil(selectedCompanies.length/bulkScheduleForm.batch_size);const totalDuration=(totalBatches-1)*bulkScheduleForm.batch_interval;showNotification(\"\".concat(selectedCompanies.length,\" emails scheduled in \").concat(totalBatches,\" batches over \").concat(totalDuration,\" minutes!\"),'success');setShowBulkScheduleModal(false);setSelectedCompanies([]);setBulkScheduleForm({scheduled_time:'',batch_size:10,batch_interval:10,email_type:'intro',attachment:null});loadData();}else{showNotification(data.error||'Failed to schedule bulk emails','error');}}else{// No attachment, use JSON\nconst response=await apiCall('/api/admin/scheduled-emails/bulk',{method:'POST',body:JSON.stringify({company_ids:selectedCompanies,scheduled_time:bulkScheduleForm.scheduled_time,batch_size:bulkScheduleForm.batch_size,batch_interval:bulkScheduleForm.batch_interval,email_type:bulkScheduleForm.email_type||'intro'})});const totalBatches=Math.ceil(selectedCompanies.length/bulkScheduleForm.batch_size);const totalDuration=(totalBatches-1)*bulkScheduleForm.batch_interval;showNotification(\"\".concat(selectedCompanies.length,\" emails scheduled in \").concat(totalBatches,\" batches over \").concat(totalDuration,\" minutes!\"),'success');setShowBulkScheduleModal(false);setSelectedCompanies([]);setBulkScheduleForm({scheduled_time:'',batch_size:10,batch_interval:10,email_type:'intro',attachment:null});loadData();}}catch(error){console.error('Error scheduling bulk emails:',error);showNotification('Failed to schedule bulk emails','error');}};const handleSelectCompany=companyId=>{setSelectedCompanies(prev=>prev.includes(companyId)?prev.filter(id=>id!==companyId):[...prev,companyId]);};const handleSelectAllCompanies=()=>{const filteredCompanies=getFilteredCompanies();if(selectedCompanies.length===filteredCompanies.length){setSelectedCompanies([]);}else{setSelectedCompanies(filteredCompanies.map(c=>c.id));}};const getFilteredCompanies=()=>{let filtered=companies||[];if(industryFilter!=='all'){filtered=filtered.filter(company=>company.industry===industryFilter);}// Smart email type filtering based on email history\nif(emailTypeFilter!=='all'){filtered=filtered.filter(company=>{const sentEmailTypes=company.sent_email_types?company.sent_email_types.split(','):[];switch(emailTypeFilter){case'intro':// Show companies that haven't received intro email yet\nreturn!sentEmailTypes.includes('intro');case'first_followup':// Show companies that received intro but not first follow-up\nreturn sentEmailTypes.includes('intro')&&!sentEmailTypes.includes('first_followup');case'second_followup':// Show companies that received first follow-up but not second follow-up\nreturn sentEmailTypes.includes('first_followup')&&!sentEmailTypes.includes('second_followup');case'third_followup':// Show companies that received second follow-up but not third follow-up\nreturn sentEmailTypes.includes('second_followup')&&!sentEmailTypes.includes('third_followup');case'final_followup':// Show companies that received third follow-up but not final follow-up\nreturn sentEmailTypes.includes('third_followup')&&!sentEmailTypes.includes('final_followup');default:return true;}});}return filtered;};const handleCreateLead=async e=>{e.preventDefault();try{// First create the lead\nconst leadResponse=await apiCall('/api/admin/leads',{method:'POST',body:JSON.stringify({company_name:leadForm.company_name,project_name:leadForm.project_name,key_account_manager:leadForm.key_account_manager,project_coordinator:leadForm.project_coordinator,client_end_manager:leadForm.client_end_manager,client_email:leadForm.client_email,client_phone:leadForm.client_phone,location:leadForm.location,start_date:leadForm.start_date,expected_project_start_date:leadForm.expected_project_start_date,last_interacted_date:leadForm.last_interacted_date,lead_status:leadForm.lead_status,lead_source:leadForm.lead_source,remarks:leadForm.remarks,priority:leadForm.priority,estimated_value:leadForm.estimated_value,industry:leadForm.industry})});if(leadResponse.success&&leadForm.assign_to_employee&&leadForm.employee_id){// If assignment is requested, assign the lead to the employee\nconst assignmentResponse=await apiCall(\"/api/admin/leads/\".concat(leadResponse.lead_id,\"/assign\"),{method:'POST',body:JSON.stringify({employee_id:leadForm.employee_id,due_date:leadForm.due_date,notes:leadForm.assignment_notes})});if(assignmentResponse.success){showNotification('Lead created and assigned successfully!','success');}else{showNotification('Lead created but assignment failed','warning');}}else{showNotification('Lead created successfully!','success');}setShowCreateModal(false);setLeadForm({company_name:'',project_name:'',key_account_manager:'',project_coordinator:'',client_end_manager:'',client_email:'',client_phone:'',location:'',start_date:'',expected_project_start_date:'',last_interacted_date:'',lead_status:'new',lead_source:'',remarks:'',priority:'medium',estimated_value:'',industry:'',assign_to_employee:false,employee_id:'',due_date:'',assignment_notes:''});loadData();}catch(error){console.error('Error creating lead:',error);showNotification('Failed to create lead','error');}};const handleAssignLead=async e=>{e.preventDefault();try{await apiCall(\"/api/admin/leads/\".concat(selectedLead.id,\"/assign\"),{method:'POST',body:JSON.stringify(assignForm)});showNotification('Lead assigned successfully!','success');setShowAssignModal(false);setSelectedLead(null);setAssignForm({employee_id:'',due_date:'',notes:''});loadData();// Refresh the leads table to show updated assignment\n}catch(error){console.error('Error assigning lead:',error);showNotification('Failed to assign lead','error');}};const handleDeleteLead=async leadId=>{if(window.confirm('Are you sure you want to delete this lead?')){try{await apiCall(\"/api/admin/leads/\".concat(leadId),{method:'DELETE'});showNotification('Lead deleted successfully!','success');loadData();}catch(error){console.error('Error deleting lead:',error);showNotification('Failed to delete lead','error');}}};const handleViewProgressUpdates=async lead=>{try{const response=await apiCall(\"/api/admin/leads/\".concat(lead.id,\"/progress-updates\"));if(response.success&&response.updates){setProgressUpdates(response.updates);setSelectedLeadForUpdates(lead);setShowProgressUpdates(true);}}catch(error){console.error('Error fetching progress updates:',error);showNotification('Failed to load progress updates','error');}};const handleUpdateLeadStatus=async(leadId,newStatus)=>{try{await apiCall(\"/api/admin/leads/\".concat(leadId,\"/status\"),{method:'PUT',body:JSON.stringify({status:newStatus})});showNotification('Lead status updated successfully!','success');loadData();}catch(error){console.error('Error updating lead status:',error);showNotification('Failed to update lead status','error');}};const filteredLeads=leads.filter(lead=>{var _lead$project_name,_lead$client_email,_lead$assigned_to;const matchesSearch=lead.company_name.toLowerCase().includes(searchTerm.toLowerCase())||((_lead$project_name=lead.project_name)===null||_lead$project_name===void 0?void 0:_lead$project_name.toLowerCase().includes(searchTerm.toLowerCase()))||((_lead$client_email=lead.client_email)===null||_lead$client_email===void 0?void 0:_lead$client_email.toLowerCase().includes(searchTerm.toLowerCase()));const matchesStatus=statusFilter==='all'||lead.lead_status===statusFilter;const matchesEmployee=employeeFilter==='all'||((_lead$assigned_to=lead.assigned_to)===null||_lead$assigned_to===void 0?void 0:_lead$assigned_to.toString())===employeeFilter;return matchesSearch&&matchesStatus&&matchesEmployee;});const sortedLeads=[...filteredLeads].sort((a,b)=>{let aValue=a[sortBy];let bValue=b[sortBy];if(sortBy==='created_at'||sortBy==='updated_at'){aValue=new Date(aValue);bValue=new Date(bValue);}if(sortOrder==='asc'){return aValue>bValue?1:-1;}else{return aValue<bValue?1:-1;}});const getStatusColor=status=>{switch(status){case'new':return'bg-blue-100 text-blue-800';case'contacted':return'bg-yellow-100 text-yellow-800';case'qualified':return'bg-green-100 text-green-800';case'proposal':return'bg-purple-100 text-purple-800';case'negotiation':return'bg-orange-100 text-orange-800';case'closed_won':return'bg-green-100 text-green-800';case'closed_lost':return'bg-red-100 text-red-800';default:return'bg-gray-100 text-gray-800';}};const getPriorityColor=priority=>{switch(priority){case'high':return'bg-red-100 text-red-800';case'medium':return'bg-yellow-100 text-yellow-800';case'low':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Generate Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:isEmployee?'View your assigned leads':'Manage and assign leads to employees'})]}),!isEmployee&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowEmailModal(true),className:\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Mail,{size:20}),\"Send Email for Lead Generation\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateModal(true),className:\"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Create New Lead\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:leads.length})]}),/*#__PURE__*/_jsx(Target,{className:\"h-8 w-8 text-blue-600\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"New Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:leads.filter(lead=>lead.lead_status==='new').length})]}),/*#__PURE__*/_jsx(Bell,{className:\"h-8 w-8 text-yellow-600\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Assigned Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:isEmployee?leads.length// All leads in employee view are assigned to them\n:leads.filter(lead=>lead.assigned_to).length})]}),/*#__PURE__*/_jsx(Users,{className:\"h-8 w-8 text-green-600\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Closed Won\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:leads.filter(lead=>lead.lead_status==='closed_won').length})]}),/*#__PURE__*/_jsx(CheckCircle,{className:\"h-8 w-8 text-green-600\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Filter,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\",size:20}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search leads...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]})}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"contacted\",children:\"Contacted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"qualified\",children:\"Qualified\"}),/*#__PURE__*/_jsx(\"option\",{value:\"proposal\",children:\"Proposal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"negotiation\",children:\"Negotiation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"closed_won\",children:\"Closed Won\"}),/*#__PURE__*/_jsx(\"option\",{value:\"closed_lost\",children:\"Closed Lost\"})]}),!isEmployee&&/*#__PURE__*/_jsxs(\"select\",{value:employeeFilter,onChange:e=>setEmployeeFilter(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Employees\"}),(employees||[]).map(employee=>/*#__PURE__*/_jsx(\"option\",{value:employee.id,children:employee.name},employee.id))]}),/*#__PURE__*/_jsxs(\"select\",{value:\"\".concat(sortBy,\"-\").concat(sortOrder),onChange:e=>{const[field,order]=e.target.value.split('-');setSortBy(field);setSortOrder(order);},className:\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"created_at-desc\",children:\"Newest First\"}),/*#__PURE__*/_jsx(\"option\",{value:\"created_at-asc\",children:\"Oldest First\"}),/*#__PURE__*/_jsx(\"option\",{value:\"company_name-asc\",children:\"Company A-Z\"}),/*#__PURE__*/_jsx(\"option\",{value:\"company_name-desc\",children:\"Company Z-A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"priority-desc\",children:\"Priority High-Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"priority-asc\",children:\"Priority Low-High\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Project\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Priority\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Assigned To\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:(sortedLeads||[]).map(lead=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Building,{className:\"h-5 w-5 text-gray-400 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:lead.company_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:lead.client_email})]})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:lead.project_name||'N/A'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:lead.industry||'N/A'})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"select\",{value:lead.lead_status,onChange:e=>handleUpdateLeadStatus(lead.id,e.target.value),className:\"text-xs font-medium px-2 py-1 rounded-full \".concat(getStatusColor(lead.lead_status),\" border-0 focus:ring-2 focus:ring-amber-500\"),children:[/*#__PURE__*/_jsx(\"option\",{value:\"new\",children:\"New\"}),/*#__PURE__*/_jsx(\"option\",{value:\"contacted\",children:\"Contacted\"}),/*#__PURE__*/_jsx(\"option\",{value:\"qualified\",children:\"Qualified\"}),/*#__PURE__*/_jsx(\"option\",{value:\"proposal\",children:\"Proposal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"negotiation\",children:\"Negotiation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"closed_won\",children:\"Closed Won\"}),/*#__PURE__*/_jsx(\"option\",{value:\"closed_lost\",children:\"Closed Lost\"})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(getPriorityColor(lead.priority)),children:lead.priority||'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:isEmployee?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 text-green-600 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-green-700\",children:\"You\"})]}):lead.assigned_to?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 text-gray-400 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900\",children:lead.assigned_employee_name||'Unknown'})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedLead(lead);setShowAssignModal(true);},className:\"text-sm text-amber-600 hover:text-amber-700 font-medium\",children:\"Assign\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:new Date(lead.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:!isEmployee?/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewProgressUpdates(lead),className:\"text-blue-600 hover:text-blue-900\",title:\"View Progress Updates\",children:/*#__PURE__*/_jsx(Eye,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedLead(lead);setShowAssignModal(true);},className:\"text-amber-600 hover:text-amber-900\",title:\"Assign Lead\",children:/*#__PURE__*/_jsx(Send,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteLead(lead.id),className:\"text-red-600 hover:text-red-900\",title:\"Delete Lead\",children:/*#__PURE__*/_jsx(Trash2,{size:16})})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"View Only\"})})]},lead.id))})]})}),sortedLeads.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Target,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No leads found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:searchTerm||statusFilter!=='all'||employeeFilter!=='all'?'Try adjusting your search or filter criteria.':'Get started by creating a new lead.'})]})]}),showCreateModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Create New Lead\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCreateModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateLead,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Company Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:leadForm.company_name,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{company_name:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Project Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:leadForm.project_name,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{project_name:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Client Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:leadForm.client_email,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{client_email:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Client Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:leadForm.client_phone,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{client_phone:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:leadForm.location,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{location:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Industry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:leadForm.industry,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{industry:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Priority\"}),/*#__PURE__*/_jsxs(\"select\",{value:leadForm.priority,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{priority:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Estimated Value\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:leadForm.estimated_value,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{estimated_value:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Remarks\"}),/*#__PURE__*/_jsx(\"textarea\",{value:leadForm.remarks,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{remarks:e.target.value})),rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2 border-t pt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Assignment Options\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"assign_to_employee\",checked:leadForm.assign_to_employee,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{assign_to_employee:e.target.checked})),className:\"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"assign_to_employee\",className:\"ml-2 text-sm font-medium text-gray-700\",children:\"Assign this lead to an employee immediately\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(Bell,{className:\"h-5 w-5 text-blue-600 mt-0.5 mr-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:\"Manager Notification\"}),/*#__PURE__*/_jsx(\"p\",{children:\"When you assign a lead, the employee's manager will be automatically notified about the assignment and can track progress updates.\"})]})]})}),leadForm.assign_to_employee&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Employee ID *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:leadForm.assign_to_employee,value:employeeSearchId,onChange:e=>setEmployeeSearchId(e.target.value),placeholder:\"Enter Employee ID\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"}),searchedEmployee&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-800\",children:[\"Employee Found: \",searchedEmployee.name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600\",children:[searchedEmployee.position,\" \\u2022 \",searchedEmployee.department]}),searchedEmployee.manager&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-green-600 font-medium\",children:[\"Manager: \",searchedEmployee.manager]})]}),employeeSearchId&&!searchedEmployee&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-red-50 border border-red-200 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-800\",children:\"Employee not found\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Due Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:leadForm.due_date,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{due_date:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Assignment Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:leadForm.assignment_notes,onChange:e=>setLeadForm(_objectSpread(_objectSpread({},leadForm),{},{assignment_notes:e.target.value})),rows:2,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\",placeholder:\"Add specific instructions or notes for the employee...\"})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCreateModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\",children:\"Create Lead\"})]})]})]})}),showEmailModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Company Management & Email Scheduling\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEmailModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Companies\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"select\",{value:industryFilter,onChange:e=>setIndustryFilter(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Industries\"}),[...new Set((companies||[]).map(c=>c.industry).filter(Boolean))].map(industry=>/*#__PURE__*/_jsx(\"option\",{value:industry,children:industry},industry))]}),/*#__PURE__*/_jsxs(\"select\",{value:emailTypeFilter,onChange:e=>setEmailTypeFilter(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Companies\"}),/*#__PURE__*/_jsx(\"option\",{value:\"intro\",children:\"Need Intro Email (haven't received)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"first_followup\",children:\"Need First Follow-Up (received intro only)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"second_followup\",children:\"Need Second Follow-Up (received first only)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"third_followup\",children:\"Need Third Follow-Up (received second only)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"final_followup\",children:\"Need Final Follow-Up (received third only)\"})]}),selectedCompanies.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowBulkScheduleModal(true),className:\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Send,{size:16}),\"Schedule Bulk Email (\",selectedCompanies.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddCompanyModal(true),className:\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Add Company\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedCompanies.length===getFilteredCompanies().length&&getFilteredCompanies().length>0,onChange:handleSelectAllCompanies,className:\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Company Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Contact Person\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Industry\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Email History\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:getFilteredCompanies().map(company=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedCompanies.includes(company.id),onChange:()=>handleSelectCompany(company.id),className:\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:company.company_name}),company.website&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:/*#__PURE__*/_jsx(\"a\",{href:company.website,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-blue-600 hover:text-blue-800\",children:company.website})})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:company.email}),company.phone&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:company.phone})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:company.contact_person||'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:company.industry||'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:company.email_type==='intro'?'Email 1: Intro Email':company.email_type==='first_followup'?'Email 2: First Follow-Up':company.email_type==='second_followup'?'Email 3: Second Follow-Up':company.email_type==='third_followup'?'Email 4: Third Follow-Up':company.email_type==='final_followup'?'Email 5: Final Follow-Up':'N/A'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:company.sent_email_types?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:company.sent_email_types.split(',').map((emailType,index)=>{// Ensure emailType is a string, or default to 'Unknown' if it's an object\nconst emailTypeStr=typeof emailType==='object'&&emailType!==null?'Unknown'// Fallback for unexpected object types\n:String(emailType);// Convert to string otherwise\nlet displayValue;switch(emailTypeStr){case'intro':displayValue='1';break;case'first_followup':displayValue='2';break;case'second_followup':displayValue='3';break;case'third_followup':displayValue='4';break;case'final_followup':displayValue='5';break;default:displayValue=emailTypeStr;// Fallback to the string itself\n}return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\",children:displayValue},index);})}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-xs\",children:\"No emails sent\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(company.status==='active'?'bg-green-100 text-green-800':company.status==='inactive'?'bg-yellow-100 text-yellow-800':'bg-red-100 text-red-800'),children:company.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedCompany(company);setScheduleForm(_objectSpread(_objectSpread({},scheduleForm),{},{company_id:company.id,email_type:company.email_type||'intro'}));setShowScheduleEmailModal(true);},className:\"text-blue-600 hover:text-blue-900\",children:\"Schedule Email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteCompany(company.id),className:\"text-red-600 hover:text-red-900\",children:\"Delete\"})]})})]},company.id))})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Scheduled Emails\"}),(scheduledEmails||[]).filter(e=>e.status==='pending').length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleSendAllPendingEmails,className:\"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors\",children:[/*#__PURE__*/_jsx(Send,{size:16}),\"Send All Pending (\",(scheduledEmails||[]).filter(e=>e.status==='pending').length,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm border overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Company\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Scheduled Time\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:(scheduledEmails||[]).map(email=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:email.company_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:email.email})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900 max-w-xs truncate\",children:email.subject})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:formatDateTime(email.scheduled_time)}),email.sent_at&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Sent: \",formatDateTime(email.sent_at)]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(email.status==='pending'?'bg-yellow-100 text-yellow-800':email.status==='sent'?'bg-green-100 text-green-800':email.status==='failed'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:email.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[email.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSendEmailNow(email.id),className:\"text-green-600 hover:text-green-900\",children:\"Send Now\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelEmail(email.id),className:\"text-red-600 hover:text-red-900\",children:\"Cancel\"})]}),email.status==='sent'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-xs\",children:\"Sent \\u2713\"})]})})]},email.id))})]})})})]})]})}),showAddCompanyModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Add New Company\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddCompanyModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateCompany,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Company Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:companyForm.company_name,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{company_name:e.target.value})),placeholder:\"Enter company name\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:companyForm.email,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{email:e.target.value})),placeholder:\"company@example.com\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Contact Person\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyForm.contact_person,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{contact_person:e.target.value})),placeholder:\"John Doe\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:companyForm.phone,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{phone:e.target.value})),placeholder:\"+1 (555) 123-4567\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Industry\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:companyForm.industry,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{industry:e.target.value})),placeholder:\"Technology, Healthcare, etc.\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Website\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",value:companyForm.website,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{website:e.target.value})),placeholder:\"https://www.company.com\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email Type *\"}),/*#__PURE__*/_jsxs(\"select\",{value:companyForm.email_type,onChange:e=>setCompanyForm(_objectSpread(_objectSpread({},companyForm),{},{email_type:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"intro\",children:\"Email 1: Intro Email\"}),/*#__PURE__*/_jsx(\"option\",{value:\"first_followup\",children:\"Email 2: First Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"second_followup\",children:\"Email 3: Second Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"third_followup\",children:\"Email 4: Third Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"final_followup\",children:\"Email 5: Final Follow-Up\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddCompanyModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:\"Add Company\"})]})]})]})}),showScheduleEmailModal&&selectedCompany&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Schedule Email\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowScheduleEmailModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-blue-900\",children:\"Company Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800\",children:selectedCompany.company_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-800\",children:selectedCompany.email}),selectedCompany.contact_person&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[\"Contact: \",selectedCompany.contact_person]}),selectedCompany.industry&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[\"Industry: \",selectedCompany.industry]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email Type *\"}),/*#__PURE__*/_jsxs(\"select\",{value:scheduleForm.email_type,onChange:e=>setScheduleForm(_objectSpread(_objectSpread({},scheduleForm),{},{email_type:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"intro\",children:\"Email 1: Intro Email\"}),/*#__PURE__*/_jsx(\"option\",{value:\"first_followup\",children:\"Email 2: First Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"second_followup\",children:\"Email 3: Second Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"third_followup\",children:\"Email 4: Third Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"final_followup\",children:\"Email 5: Final Follow-Up\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Email Template Preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Subject:\"}),\" \",scheduleForm.email_type==='intro'?'Strengthening your digital presence across the Middle East':scheduleForm.email_type==='first_followup'?'Following up on your digital marketing initiatives':scheduleForm.email_type==='second_followup'?'Achieving measurable ROI through digital marketing':scheduleForm.email_type==='third_followup'?'Your reliable partner for digital growth in the Middle East':scheduleForm.email_type==='final_followup'?'Staying connected for future digital initiatives':'Let\\'s Connect â€” Explore How We Can Add Value to Your Business']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Template will be personalized with company name and contact person\"})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleScheduleEmail,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Schedule Date & Time *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",required:true,value:scheduleForm.scheduled_time,onChange:e=>setScheduleForm(_objectSpread(_objectSpread({},scheduleForm),{},{scheduled_time:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-2\",children:\"Email Preview\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mb-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Subject:\"}),\" \",scheduleForm.email_type==='intro'?'Strengthening your digital presence across the Middle East':scheduleForm.email_type==='first_followup'?'Following up on your digital marketing initiatives':scheduleForm.email_type==='second_followup'?'Achieving measurable ROI through digital marketing':scheduleForm.email_type==='third_followup'?'Your reliable partner for digital growth in the Middle East':scheduleForm.email_type==='final_followup'?'Staying connected for future digital initiatives':'Let\\'s Connect â€” Explore How We Can Add Value to Your Business']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"The email will be automatically generated with personalized content for \",selectedCompany.company_name,\".\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowScheduleEmailModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Send,{size:16}),\"Schedule Email\"]})]})]})]})}),showBulkScheduleModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 pb-8 w-full max-w-lg max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Schedule Bulk Emails\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowBulkScheduleModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-green-900\",children:\"Selected Companies\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-800\",children:[selectedCompanies.length,\" companies selected for bulk email scheduling\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-xs text-green-700\",children:companies.filter(c=>selectedCompanies.includes(c.id)).map(c=>c.company_name).join(', ')})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleBulkScheduleEmails,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Schedule Date & Time *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",required:true,value:bulkScheduleForm.scheduled_time,onChange:e=>setBulkScheduleForm(_objectSpread(_objectSpread({},bulkScheduleForm),{},{scheduled_time:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Number of Companies per Batch *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"1\",value:bulkScheduleForm.batch_size,onChange:e=>setBulkScheduleForm(_objectSpread(_objectSpread({},bulkScheduleForm),{},{batch_size:parseInt(e.target.value)||1})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\",placeholder:\"e.g., 10\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"How many companies should receive emails in each batch\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Time Interval between Batches (minutes) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"1\",value:bulkScheduleForm.batch_interval,onChange:e=>setBulkScheduleForm(_objectSpread(_objectSpread({},bulkScheduleForm),{},{batch_interval:parseInt(e.target.value)||1})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\",placeholder:\"e.g., 10\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Wait time between sending each batch of emails\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email Type *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:bulkScheduleForm.email_type||'intro',onChange:e=>setBulkScheduleForm(_objectSpread(_objectSpread({},bulkScheduleForm),{},{email_type:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"intro\",children:\"Intro Email\"}),/*#__PURE__*/_jsx(\"option\",{value:\"first_followup\",children:\"First Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"second_followup\",children:\"Second Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"third_followup\",children:\"Third Follow-Up\"}),/*#__PURE__*/_jsx(\"option\",{value:\"final_followup\",children:\"Final Follow-Up\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Select which type of email to send to all selected companies\"})]}),bulkScheduleForm.email_type==='intro'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Attach Document (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"*/*\",onChange:e=>{const file=e.target.files[0];setBulkScheduleForm(_objectSpread(_objectSpread({},bulkScheduleForm),{},{attachment:file}));},className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Attach any document to include with the intro email (PDF, DOC, XLS, PPT, images, etc.)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900 mb-3\",children:\"Email Template Preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 leading-relaxed\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-semibold\",children:\"Template:\"}),\" \",bulkScheduleForm.email_type==='intro'?'Strengthening your digital presence across the Middle East':bulkScheduleForm.email_type==='first_followup'?'Following up on your digital marketing initiatives':bulkScheduleForm.email_type==='second_followup'?'Achieving measurable ROI through digital marketing':bulkScheduleForm.email_type==='third_followup'?'Your reliable partner for digital growth in the Middle East':bulkScheduleForm.email_type==='final_followup'?'Staying connected for future digital initiatives':'Dynamic templates based on each company\\'s email type and industry']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-semibold\",children:\"Email Type:\"}),\" \",bulkScheduleForm.email_type==='intro'?'Intro Email':bulkScheduleForm.email_type==='first_followup'?'First Follow-Up':bulkScheduleForm.email_type==='second_followup'?'Second Follow-Up':bulkScheduleForm.email_type==='third_followup'?'Third Follow-Up':bulkScheduleForm.email_type==='final_followup'?'Final Follow-Up':bulkScheduleForm.email_type]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 pt-2\",children:\"Each email will be personalized with company name, contact person, and industry-specific content\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 pb-2 sticky bottom-0 bg-white\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowBulkScheduleModal(false),className:\"px-6 py-2.5 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-medium\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"px-6 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 whitespace-nowrap font-medium\",children:[/*#__PURE__*/_jsx(Send,{size:16}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Schedule \",selectedCompanies.length,\" Email\",selectedCompanies.length!==1?'s':'']})]})]})]})]})}),showAssignModal&&selectedLead&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Assign Lead\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAssignModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-2\",children:\"Assigning lead for:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:selectedLead.company_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:selectedLead.project_name})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAssignLead,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Employee ID *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,placeholder:\"Enter Employee ID (e.g., 50098)\",value:assignForm.employee_id,onChange:e=>setAssignForm(_objectSpread(_objectSpread({},assignForm),{},{employee_id:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"}),assignForm.employee_id&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-lg\",children:loadingEmployeeDetails?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-600\",children:\"Loading employee details...\"}):assignEmployeeDetails?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800 font-medium\",children:[\"Employee: \",assignEmployeeDetails.name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-600\",children:assignEmployeeDetails.designation||'No Designation'})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[\"Employee ID: \",assignForm.employee_id]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-600\",children:\"Employee not found\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Due Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:assignForm.due_date,onChange:e=>setAssignForm(_objectSpread(_objectSpread({},assignForm),{},{due_date:e.target.value})),className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Notes\"}),/*#__PURE__*/_jsx(\"textarea\",{value:assignForm.notes,onChange:e=>setAssignForm(_objectSpread(_objectSpread({},assignForm),{},{notes:e.target.value})),rows:3,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\",placeholder:\"Add any specific instructions or notes...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAssignModal(false),className:\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\",children:\"Assign Lead\"})]})]})]})}),showProgressUpdates&&selectedLeadForUpdates&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 border-b flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Progress Updates\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[selectedLeadForUpdates.company_name,\" - \",selectedLeadForUpdates.project_name]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowProgressUpdates(false);setProgressUpdates([]);setSelectedLeadForUpdates(null);},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 overflow-y-auto max-h-[60vh]\",children:progressUpdates.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(FileText,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-2\",children:\"No progress updates yet\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 p-3 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 text-gray-600\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold text-gray-700\",children:[\"Complete Activity Log (\",progressUpdates.length,\" entries)\"]})]})}),progressUpdates.map((update,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[index<progressUpdates.length-1&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-7 top-12 bottom-0 w-0.5 bg-blue-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-l-4 border-blue-500 bg-blue-50 p-4 rounded-lg shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center w-6 h-6 bg-blue-600 rounded-full\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold text-white\",children:index+1})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-900\",children:update.employee_name})]})})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(update.created_at).toLocaleString('en-IN',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 capitalize\",children:update.status})}),update.progress_notes&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-white rounded border border-blue-200\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-700 whitespace-pre-wrap\",children:update.progress_notes})})]})]},update.id||index))]})})]})})]});};export default GenerateLeadsView;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Plus","Users","Target","Calendar","MapPin","Mail","Phone","Building","User","Clock","CheckCircle","AlertCircle","Edit","Trash2","Eye","Filter","ChevronDown","Send","Bell","FileText","TrendingUp","BarChart3","X","apiCall","useSocket","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GenerateLeadsView","_ref","showNotification","user","isEmployee","socket","formatDateTime","dateTimeString","console","log","date","time","includes","split","parsedDate","Date","isNaN","getTime","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","concat","error","leads","setLeads","employees","setEmployees","loading","setLoading","showCreateModal","setShowCreateModal","showAssignModal","setShowAssignModal","showEmailModal","setShowEmailModal","companies","setCompanies","scheduledEmails","setScheduledEmails","showAddCompanyModal","setShowAddCompanyModal","showScheduleEmailModal","setShowScheduleEmailModal","selectedCompany","setSelectedCompany","companyForm","setCompanyForm","company_name","email","contact_person","phone","industry","website","email_type","scheduleForm","setScheduleForm","scheduled_time","company_id","selectedCompanies","setSelectedCompanies","industryFilter","setIndustryFilter","emailTypeFilter","setEmailTypeFilter","showBulkScheduleModal","setShowBulkScheduleModal","bulkScheduleForm","setBulkScheduleForm","batch_size","batch_interval","selectedLead","setSelectedLead","searchTerm","setSearchTerm","statusFilter","setStatusFilter","employeeFilter","setEmployeeFilter","sortBy","setSortBy","sortOrder","setSortOrder","showProgressUpdates","setShowProgressUpdates","progressUpdates","setProgressUpdates","selectedLeadForUpdates","setSelectedLeadForUpdates","fetchScheduledEmails","emailsData","emails","leadForm","setLeadForm","project_name","key_account_manager","project_coordinator","client_end_manager","client_email","client_phone","location","start_date","expected_project_start_date","last_interacted_date","lead_status","lead_source","remarks","priority","estimated_value","assign_to_employee","employee_id","due_date","assignment_notes","assignEmployeeDetails","setAssignEmployeeDetails","loadingEmployeeDetails","setLoadingEmployeeDetails","assignForm","setAssignForm","notes","employeeSearchMode","setEmployeeSearchMode","employeeSearchId","setEmployeeSearchId","searchedEmployee","setSearchedEmployee","loadData","length","employee","find","emp","employeeId","_objectSpread","id","on","data","type","message","error_message","off","fetchEmployeeDetails","trim","response","name","leadsData","employeesData","companiesData","Promise","all","map","lead","handleCreateCompany","e","preventDefault","method","body","JSON","stringify","handleDeleteCompany","companyId","window","confirm","handleScheduleEmail","handleCancelEmail","emailId","handleSendEmailNow","handleSendAllPendingEmails","handleBulkScheduleEmails","attachment","formData","FormData","append","toString","fetch","credentials","json","success","totalBatches","Math","ceil","totalDuration","company_ids","handleSelectCompany","prev","filter","handleSelectAllCompanies","filteredCompanies","getFilteredCompanies","c","filtered","company","sentEmailTypes","sent_email_types","handleCreateLead","leadResponse","assignmentResponse","lead_id","handleAssignLead","handleDeleteLead","leadId","handleViewProgressUpdates","updates","handleUpdateLeadStatus","newStatus","status","filteredLeads","_lead$project_name","_lead$client_email","_lead$assigned_to","matchesSearch","toLowerCase","matchesStatus","matchesEmployee","assigned_to","sortedLeads","sort","a","b","aValue","bValue","getStatusColor","getPriorityColor","className","children","onClick","size","placeholder","value","onChange","target","field","order","assigned_employee_name","created_at","toLocaleDateString","title","onSubmit","required","rows","checked","htmlFor","position","department","manager","Set","Boolean","href","rel","emailType","index","emailTypeStr","displayValue","subject","sent_at","join","min","parseInt","accept","file","files","designation","update","employee_name","toLocaleString","hour","minute","second","progress_notes"],"sources":["C:/Users/YSXP/Desktop/New folder/frontend/src/components/GenerateLeadsView.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  Plus, Users, Target, Calendar, MapPin, Mail, Phone, \r\n  Building, User, Clock, CheckCircle, AlertCircle, \r\n  Edit, Trash2, Eye, Filter, ChevronDown,\r\n  Send, Bell, FileText, TrendingUp, BarChart3, X\r\n} from 'lucide-react';\r\nimport { apiCall } from '../utils/api';\r\nimport { useSocket } from '../contexts/SocketContext';\r\n\r\nconst GenerateLeadsView = ({ showNotification, user, isEmployee = false }) => {\r\n  const socket = useSocket();\r\n  \r\n  // Helper function to format datetime strings\r\n  const formatDateTime = (dateTimeString) => {\r\n    if (!dateTimeString) return 'Not available';\r\n    \r\n    console.log('Formatting datetime:', dateTimeString, 'Type:', typeof dateTimeString);\r\n    \r\n    try {\r\n      // Handle different possible formats\r\n      let date, time;\r\n      \r\n      if (typeof dateTimeString === 'string') {\r\n        if (dateTimeString.includes(' ')) {\r\n          // Format: YYYY-MM-DD HH:MM:SS\r\n          [date, time] = dateTimeString.split(' ');\r\n        } else if (dateTimeString.includes('T')) {\r\n          // Format: YYYY-MM-DDTHH:MM:SS\r\n          [date, time] = dateTimeString.split('T');\r\n        } else {\r\n          // Try to parse as a date string\r\n          const parsedDate = new Date(dateTimeString);\r\n          if (!isNaN(parsedDate.getTime())) {\r\n            const year = parsedDate.getFullYear();\r\n            const month = String(parsedDate.getMonth() + 1).padStart(2, '0');\r\n            const day = String(parsedDate.getDate()).padStart(2, '0');\r\n            const hours = String(parsedDate.getHours()).padStart(2, '0');\r\n            const minutes = String(parsedDate.getMinutes()).padStart(2, '0');\r\n            const seconds = String(parsedDate.getSeconds()).padStart(2, '0');\r\n            return `${month}/${day}/${year}, ${hours}:${minutes}:${seconds}`;\r\n          }\r\n          return 'Invalid format';\r\n        }\r\n        \r\n        if (date && time) {\r\n          const [year, month, day] = date.split('-');\r\n          const [hours, minutes, seconds] = time.split(':');\r\n          \r\n          if (year && month && day && hours && minutes && seconds) {\r\n            return `${month}/${day}/${year}, ${hours}:${minutes}:${seconds}`;\r\n          }\r\n        }\r\n      }\r\n      \r\n      return 'Invalid format';\r\n    } catch (error) {\r\n      console.error('Error formatting datetime:', error);\r\n      return 'Format error';\r\n    }\r\n  };\r\n  const [leads, setLeads] = useState([]);\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showAssignModal, setShowAssignModal] = useState(false);\r\n  const [showEmailModal, setShowEmailModal] = useState(false);\r\n  const [companies, setCompanies] = useState([]);\r\n  const [scheduledEmails, setScheduledEmails] = useState([]);\r\n  const [showAddCompanyModal, setShowAddCompanyModal] = useState(false);\r\n  const [showScheduleEmailModal, setShowScheduleEmailModal] = useState(false);\r\n  const [selectedCompany, setSelectedCompany] = useState(null);\r\n  const [companyForm, setCompanyForm] = useState({\r\n    company_name: '',\r\n    email: '',\r\n    contact_person: '',\r\n    phone: '',\r\n    industry: '',\r\n    website: '',\r\n    email_type: 'intro'\r\n  });\r\n  const [scheduleForm, setScheduleForm] = useState({\r\n    scheduled_time: '',\r\n    company_id: '',\r\n    email_type: 'intro'\r\n  });\r\n  const [selectedCompanies, setSelectedCompanies] = useState([]);\r\n  const [industryFilter, setIndustryFilter] = useState('all');\r\n  const [emailTypeFilter, setEmailTypeFilter] = useState('all');\r\n  const [showBulkScheduleModal, setShowBulkScheduleModal] = useState(false);\r\n  const [bulkScheduleForm, setBulkScheduleForm] = useState({\r\n    scheduled_time: '',\r\n    batch_size: 10,\r\n    batch_interval: 10,\r\n    email_type: 'intro'\r\n  });\r\n  const [selectedLead, setSelectedLead] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [employeeFilter, setEmployeeFilter] = useState('all');\r\n  const [sortBy, setSortBy] = useState('created_at');\r\n  const [sortOrder, setSortOrder] = useState('desc');\r\n  const [showProgressUpdates, setShowProgressUpdates] = useState(false);\r\n  const [progressUpdates, setProgressUpdates] = useState([]);\r\n  const [selectedLeadForUpdates, setSelectedLeadForUpdates] = useState(null);\r\n\r\n  const fetchScheduledEmails = useCallback(async () => {\r\n    try {\r\n      const emailsData = await apiCall('/api/admin/scheduled-emails');\r\n      setScheduledEmails(emailsData?.emails || []);\r\n    } catch (error) {\r\n      console.error('Error fetching scheduled emails:', error);\r\n    }\r\n  }, [setScheduledEmails]);\r\n\r\n  // Form states\r\n  const [leadForm, setLeadForm] = useState({\r\n    company_name: '',\r\n    project_name: '',\r\n    key_account_manager: '',\r\n    project_coordinator: '',\r\n    client_end_manager: '',\r\n    client_email: '',\r\n    client_phone: '',\r\n    location: '',\r\n    start_date: '',\r\n    expected_project_start_date: '',\r\n    last_interacted_date: '',\r\n    lead_status: 'new',\r\n    lead_source: '',\r\n    remarks: '',\r\n    priority: 'medium',\r\n    estimated_value: '',\r\n    industry: '',\r\n    // Assignment fields\r\n    assign_to_employee: false,\r\n    employee_id: '',\r\n    due_date: '',\r\n    assignment_notes: ''\r\n  });\r\n\r\n  const [assignEmployeeDetails, setAssignEmployeeDetails] = useState(null);\r\n  const [loadingEmployeeDetails, setLoadingEmployeeDetails] = useState(false);\r\n  const [assignForm, setAssignForm] = useState({\r\n    employee_id: '',\r\n    due_date: '',\r\n    notes: ''\r\n  });\r\n  const [employeeSearchMode, setEmployeeSearchMode] = useState('manual'); // Only manual mode\r\n  const [employeeSearchId, setEmployeeSearchId] = useState('');\r\n  const [searchedEmployee, setSearchedEmployee] = useState(null);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  // Auto-search employee when ID is entered (client-side like tickets)\r\n  useEffect(() => {\r\n    if (employeeSearchId && employees.length > 0) {\r\n      const employee = employees.find(emp => emp.employeeId === employeeSearchId);\r\n      if (employee) {\r\n        setSearchedEmployee(employee);\r\n        setLeadForm({...leadForm, employee_id: employee.id});\r\n      } else {\r\n        setSearchedEmployee(null);\r\n        setLeadForm({...leadForm, employee_id: ''});\r\n      }\r\n    } else {\r\n      setSearchedEmployee(null);\r\n      setLeadForm({...leadForm, employee_id: ''});\r\n    }\r\n  }, [employeeSearchId, employees]);\r\n\r\n  // WebSocket listeners for real-time email updates\r\n  useEffect(() => {\r\n    if (socket) {\r\n      // Listen for email status updates\r\n      socket.on('email_sent', (data) => {\r\n        console.log('ðŸ“§ Email sent notification:', data);\r\n        // Refresh scheduled emails data\r\n        fetchScheduledEmails();\r\n        // Show success notification\r\n        showNotification({\r\n          type: 'success',\r\n          message: `Email sent successfully to ${data.company_name}!`\r\n        });\r\n      });\r\n\r\n      socket.on('email_failed', (data) => {\r\n        console.log('âŒ Email failed notification:', data);\r\n        // Refresh scheduled emails data\r\n        fetchScheduledEmails();\r\n        // Show error notification\r\n        showNotification({\r\n          type: 'error',\r\n          message: `Failed to send email to ${data.company_name}: ${data.error_message}`\r\n        });\r\n      });\r\n\r\n      return () => {\r\n        socket.off('email_sent');\r\n        socket.off('email_failed');\r\n      };\r\n    }\r\n  }, [socket, showNotification, fetchScheduledEmails]);\r\n\r\n  // Fetch employee details when employee ID changes in assign form\r\n  useEffect(() => {\r\n    const fetchEmployeeDetails = async () => {\r\n      if (assignForm.employee_id && assignForm.employee_id.trim() !== '') {\r\n        setLoadingEmployeeDetails(true);\r\n        try {\r\n          const response = await apiCall(`/api/admin/employees/${assignForm.employee_id}/details`, 'GET');\r\n          if (response && response.name) {\r\n            setAssignEmployeeDetails(response);\r\n          } else {\r\n            setAssignEmployeeDetails(null);\r\n          }\r\n        } catch (error) {\r\n          console.error('Error fetching employee details:', error);\r\n          setAssignEmployeeDetails(null);\r\n        } finally {\r\n          setLoadingEmployeeDetails(false);\r\n        }\r\n      } else {\r\n        setAssignEmployeeDetails(null);\r\n      }\r\n    };\r\n\r\n    fetchEmployeeDetails();\r\n  }, [assignForm.employee_id]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      if (isEmployee) {\r\n        // For employees, only load assigned leads\r\n        const leadsData = await apiCall(`/api/employee/assigned-leads?employee_id=${user?.id}`);\r\n        console.log('ðŸ” Debug: Employee assigned leads data received:', leadsData);\r\n        // The employee endpoint returns {success: true, leads: [...]}\r\n        setLeads(leadsData?.leads || []);\r\n        setEmployees([]);\r\n        setCompanies([]);\r\n        setScheduledEmails([]);\r\n      } else {\r\n        // For admins, load all data\r\n        const [leadsData, employeesData, companiesData, emailsData] = await Promise.all([\r\n          apiCall('/api/admin/leads'),\r\n          apiCall('/api/admin/employees'),\r\n          apiCall('/api/admin/companies'),\r\n          apiCall('/api/admin/scheduled-emails')\r\n        ]);\r\n        \r\n        console.log('ðŸ” Debug: Leads data received:', leadsData);\r\n        console.log('ðŸ” Debug: Priority values:', leadsData?.map(lead => ({ id: lead.id, priority: lead.priority })));\r\n        \r\n        setLeads(leadsData || []);\r\n        setEmployees(employeesData || []);\r\n        setCompanies(companiesData?.companies || []);\r\n        setScheduledEmails(emailsData?.emails || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading data:', error);\r\n      showNotification('Failed to load data', 'error');\r\n      // Ensure arrays are never null\r\n      setLeads([]);\r\n      setEmployees([]);\r\n      setCompanies([]);\r\n      setScheduledEmails([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Company Management Functions\r\n  const handleCreateCompany = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await apiCall('/api/admin/companies', {\r\n        method: 'POST',\r\n        body: JSON.stringify(companyForm)\r\n      });\r\n      \r\n      showNotification('Company created successfully!', 'success');\r\n      setShowAddCompanyModal(false);\r\n      setCompanyForm({\r\n        company_name: '',\r\n        email: '',\r\n        contact_person: '',\r\n        phone: '',\r\n        industry: '',\r\n        website: ''\r\n      });\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error creating company:', error);\r\n      showNotification('Failed to create company', 'error');\r\n    }\r\n  };\r\n\r\n  const handleDeleteCompany = async (companyId) => {\r\n    if (window.confirm('Are you sure you want to delete this company?')) {\r\n      try {\r\n        await apiCall(`/api/admin/companies/${companyId}`, {\r\n          method: 'DELETE'\r\n        });\r\n        \r\n        showNotification('Company deleted successfully!', 'success');\r\n        loadData();\r\n      } catch (error) {\r\n        console.error('Error deleting company:', error);\r\n        showNotification('Failed to delete company', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleScheduleEmail = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await apiCall('/api/admin/scheduled-emails', {\r\n        method: 'POST',\r\n        body: JSON.stringify(scheduleForm)\r\n      });\r\n      \r\n      showNotification('Email scheduled successfully!', 'success');\r\n      setShowScheduleEmailModal(false);\r\n      setScheduleForm({\r\n        scheduled_time: '',\r\n        company_id: ''\r\n      });\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error scheduling email:', error);\r\n      showNotification('Failed to schedule email', 'error');\r\n    }\r\n  };\r\n\r\n  const handleCancelEmail = async (emailId) => {\r\n    if (window.confirm('Are you sure you want to cancel this scheduled email?')) {\r\n      try {\r\n        await apiCall(`/api/admin/scheduled-emails/${emailId}`, {\r\n          method: 'DELETE'\r\n        });\r\n        \r\n        showNotification('Email cancelled successfully!', 'success');\r\n        loadData();\r\n      } catch (error) {\r\n        console.error('Error cancelling email:', error);\r\n        showNotification('Failed to cancel email', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSendEmailNow = async (emailId) => {\r\n    try {\r\n      await apiCall(`/api/admin/scheduled-emails/${emailId}/send-now`, {\r\n        method: 'POST'\r\n      });\r\n      \r\n      showNotification('Email sent successfully!', 'success');\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error sending email:', error);\r\n      showNotification('Failed to send email', 'error');\r\n    }\r\n  };\r\n\r\n  const handleSendAllPendingEmails = async () => {\r\n    if (window.confirm('Are you sure you want to send all pending emails now?')) {\r\n      try {\r\n        await apiCall('/api/admin/scheduled-emails/send-all-pending', {\r\n          method: 'POST'\r\n        });\r\n        \r\n        showNotification('All pending emails sent successfully!', 'success');\r\n        loadData();\r\n      } catch (error) {\r\n        console.error('Error sending all emails:', error);\r\n        showNotification('Failed to send emails', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleBulkScheduleEmails = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // If there's an attachment, use FormData and direct fetch\r\n      if (bulkScheduleForm.attachment) {\r\n        const formData = new FormData();\r\n        formData.append('company_ids', JSON.stringify(selectedCompanies));\r\n        formData.append('scheduled_time', bulkScheduleForm.scheduled_time);\r\n        formData.append('batch_size', bulkScheduleForm.batch_size.toString());\r\n        formData.append('batch_interval', bulkScheduleForm.batch_interval.toString());\r\n        formData.append('email_type', bulkScheduleForm.email_type || 'intro');\r\n        formData.append('attachment', bulkScheduleForm.attachment);\r\n        \r\n        const response = await fetch('http://localhost:8000/api/admin/scheduled-emails/bulk', {\r\n          method: 'POST',\r\n          body: formData,\r\n          credentials: 'include'\r\n        });\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n          const totalBatches = Math.ceil(selectedCompanies.length / bulkScheduleForm.batch_size);\r\n          const totalDuration = (totalBatches - 1) * bulkScheduleForm.batch_interval;\r\n          \r\n          showNotification(\r\n            `${selectedCompanies.length} emails scheduled in ${totalBatches} batches over ${totalDuration} minutes!`, \r\n            'success'\r\n          );\r\n          setShowBulkScheduleModal(false);\r\n          setSelectedCompanies([]);\r\n          setBulkScheduleForm({ \r\n            scheduled_time: '', \r\n            batch_size: 10, \r\n            batch_interval: 10,\r\n            email_type: 'intro',\r\n            attachment: null\r\n          });\r\n          loadData();\r\n        } else {\r\n          showNotification(data.error || 'Failed to schedule bulk emails', 'error');\r\n        }\r\n      } else {\r\n        // No attachment, use JSON\r\n        const response = await apiCall('/api/admin/scheduled-emails/bulk', {\r\n          method: 'POST',\r\n          body: JSON.stringify({\r\n            company_ids: selectedCompanies,\r\n            scheduled_time: bulkScheduleForm.scheduled_time,\r\n            batch_size: bulkScheduleForm.batch_size,\r\n            batch_interval: bulkScheduleForm.batch_interval,\r\n            email_type: bulkScheduleForm.email_type || 'intro'\r\n          })\r\n        });\r\n        \r\n        const totalBatches = Math.ceil(selectedCompanies.length / bulkScheduleForm.batch_size);\r\n        const totalDuration = (totalBatches - 1) * bulkScheduleForm.batch_interval;\r\n        \r\n        showNotification(\r\n          `${selectedCompanies.length} emails scheduled in ${totalBatches} batches over ${totalDuration} minutes!`, \r\n          'success'\r\n        );\r\n        setShowBulkScheduleModal(false);\r\n        setSelectedCompanies([]);\r\n        setBulkScheduleForm({ \r\n          scheduled_time: '', \r\n          batch_size: 10, \r\n          batch_interval: 10,\r\n          email_type: 'intro',\r\n          attachment: null\r\n        });\r\n        loadData();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error scheduling bulk emails:', error);\r\n      showNotification('Failed to schedule bulk emails', 'error');\r\n    }\r\n  };\r\n\r\n  const handleSelectCompany = (companyId) => {\r\n    setSelectedCompanies(prev => \r\n      prev.includes(companyId) \r\n        ? prev.filter(id => id !== companyId)\r\n        : [...prev, companyId]\r\n    );\r\n  };\r\n\r\n  const handleSelectAllCompanies = () => {\r\n    const filteredCompanies = getFilteredCompanies();\r\n    if (selectedCompanies.length === filteredCompanies.length) {\r\n      setSelectedCompanies([]);\r\n    } else {\r\n      setSelectedCompanies(filteredCompanies.map(c => c.id));\r\n    }\r\n  };\r\n\r\n  const getFilteredCompanies = () => {\r\n    let filtered = companies || [];\r\n    \r\n    if (industryFilter !== 'all') {\r\n      filtered = filtered.filter(company => company.industry === industryFilter);\r\n    }\r\n    \r\n    // Smart email type filtering based on email history\r\n    if (emailTypeFilter !== 'all') {\r\n      filtered = filtered.filter(company => {\r\n        const sentEmailTypes = company.sent_email_types ? company.sent_email_types.split(',') : [];\r\n        \r\n        switch (emailTypeFilter) {\r\n          case 'intro':\r\n            // Show companies that haven't received intro email yet\r\n            return !sentEmailTypes.includes('intro');\r\n            \r\n          case 'first_followup':\r\n            // Show companies that received intro but not first follow-up\r\n            return sentEmailTypes.includes('intro') && !sentEmailTypes.includes('first_followup');\r\n            \r\n          case 'second_followup':\r\n            // Show companies that received first follow-up but not second follow-up\r\n            return sentEmailTypes.includes('first_followup') && !sentEmailTypes.includes('second_followup');\r\n            \r\n          case 'third_followup':\r\n            // Show companies that received second follow-up but not third follow-up\r\n            return sentEmailTypes.includes('second_followup') && !sentEmailTypes.includes('third_followup');\r\n            \r\n          case 'final_followup':\r\n            // Show companies that received third follow-up but not final follow-up\r\n            return sentEmailTypes.includes('third_followup') && !sentEmailTypes.includes('final_followup');\r\n            \r\n          default:\r\n            return true;\r\n        }\r\n      });\r\n    }\r\n    \r\n    return filtered;\r\n  };\r\n\r\n  const handleCreateLead = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // First create the lead\r\n      const leadResponse = await apiCall('/api/admin/leads', {\r\n        method: 'POST',\r\n        body: JSON.stringify({\r\n          company_name: leadForm.company_name,\r\n          project_name: leadForm.project_name,\r\n          key_account_manager: leadForm.key_account_manager,\r\n          project_coordinator: leadForm.project_coordinator,\r\n          client_end_manager: leadForm.client_end_manager,\r\n          client_email: leadForm.client_email,\r\n          client_phone: leadForm.client_phone,\r\n          location: leadForm.location,\r\n          start_date: leadForm.start_date,\r\n          expected_project_start_date: leadForm.expected_project_start_date,\r\n          last_interacted_date: leadForm.last_interacted_date,\r\n          lead_status: leadForm.lead_status,\r\n          lead_source: leadForm.lead_source,\r\n          remarks: leadForm.remarks,\r\n          priority: leadForm.priority,\r\n          estimated_value: leadForm.estimated_value,\r\n          industry: leadForm.industry\r\n        })\r\n      });\r\n      \r\n      if (leadResponse.success && leadForm.assign_to_employee && leadForm.employee_id) {\r\n        // If assignment is requested, assign the lead to the employee\r\n        const assignmentResponse = await apiCall(`/api/admin/leads/${leadResponse.lead_id}/assign`, {\r\n          method: 'POST',\r\n          body: JSON.stringify({\r\n            employee_id: leadForm.employee_id,\r\n            due_date: leadForm.due_date,\r\n            notes: leadForm.assignment_notes\r\n          })\r\n        });\r\n        \r\n        if (assignmentResponse.success) {\r\n          showNotification('Lead created and assigned successfully!', 'success');\r\n        } else {\r\n          showNotification('Lead created but assignment failed', 'warning');\r\n        }\r\n      } else {\r\n        showNotification('Lead created successfully!', 'success');\r\n      }\r\n      \r\n      setShowCreateModal(false);\r\n      setLeadForm({\r\n        company_name: '',\r\n        project_name: '',\r\n        key_account_manager: '',\r\n        project_coordinator: '',\r\n        client_end_manager: '',\r\n        client_email: '',\r\n        client_phone: '',\r\n        location: '',\r\n        start_date: '',\r\n        expected_project_start_date: '',\r\n        last_interacted_date: '',\r\n        lead_status: 'new',\r\n        lead_source: '',\r\n        remarks: '',\r\n        priority: 'medium',\r\n        estimated_value: '',\r\n        industry: '',\r\n        assign_to_employee: false,\r\n        employee_id: '',\r\n        due_date: '',\r\n        assignment_notes: ''\r\n      });\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error creating lead:', error);\r\n      showNotification('Failed to create lead', 'error');\r\n    }\r\n  };\r\n\r\n  const handleAssignLead = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await apiCall(`/api/admin/leads/${selectedLead.id}/assign`, {\r\n        method: 'POST',\r\n        body: JSON.stringify(assignForm)\r\n      });\r\n      \r\n      showNotification('Lead assigned successfully!', 'success');\r\n      setShowAssignModal(false);\r\n      setSelectedLead(null);\r\n      setAssignForm({\r\n        employee_id: '',\r\n        due_date: '',\r\n        notes: ''\r\n      });\r\n      loadData(); // Refresh the leads table to show updated assignment\r\n    } catch (error) {\r\n      console.error('Error assigning lead:', error);\r\n      showNotification('Failed to assign lead', 'error');\r\n    }\r\n  };\r\n\r\n  const handleDeleteLead = async (leadId) => {\r\n    if (window.confirm('Are you sure you want to delete this lead?')) {\r\n      try {\r\n        await apiCall(`/api/admin/leads/${leadId}`, {\r\n          method: 'DELETE'\r\n        });\r\n        \r\n        showNotification('Lead deleted successfully!', 'success');\r\n        loadData();\r\n      } catch (error) {\r\n        console.error('Error deleting lead:', error);\r\n        showNotification('Failed to delete lead', 'error');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleViewProgressUpdates = async (lead) => {\r\n    try {\r\n      const response = await apiCall(`/api/admin/leads/${lead.id}/progress-updates`);\r\n      if (response.success && response.updates) {\r\n        setProgressUpdates(response.updates);\r\n        setSelectedLeadForUpdates(lead);\r\n        setShowProgressUpdates(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching progress updates:', error);\r\n      showNotification('Failed to load progress updates', 'error');\r\n    }\r\n  };\r\n\r\n  const handleUpdateLeadStatus = async (leadId, newStatus) => {\r\n    try {\r\n      await apiCall(`/api/admin/leads/${leadId}/status`, {\r\n        method: 'PUT',\r\n        body: JSON.stringify({ status: newStatus })\r\n      });\r\n      \r\n      showNotification('Lead status updated successfully!', 'success');\r\n      loadData();\r\n    } catch (error) {\r\n      console.error('Error updating lead status:', error);\r\n      showNotification('Failed to update lead status', 'error');\r\n    }\r\n  };\r\n\r\n  const filteredLeads = leads.filter(lead => {\r\n    const matchesSearch = lead.company_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         lead.project_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         lead.client_email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesStatus = statusFilter === 'all' || lead.lead_status === statusFilter;\r\n    const matchesEmployee = employeeFilter === 'all' || lead.assigned_to?.toString() === employeeFilter;\r\n    \r\n    return matchesSearch && matchesStatus && matchesEmployee;\r\n  });\r\n\r\n  const sortedLeads = [...filteredLeads].sort((a, b) => {\r\n    let aValue = a[sortBy];\r\n    let bValue = b[sortBy];\r\n    \r\n    if (sortBy === 'created_at' || sortBy === 'updated_at') {\r\n      aValue = new Date(aValue);\r\n      bValue = new Date(bValue);\r\n    }\r\n    \r\n    if (sortOrder === 'asc') {\r\n      return aValue > bValue ? 1 : -1;\r\n    } else {\r\n      return aValue < bValue ? 1 : -1;\r\n    }\r\n  });\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'new': return 'bg-blue-100 text-blue-800';\r\n      case 'contacted': return 'bg-yellow-100 text-yellow-800';\r\n      case 'qualified': return 'bg-green-100 text-green-800';\r\n      case 'proposal': return 'bg-purple-100 text-purple-800';\r\n      case 'negotiation': return 'bg-orange-100 text-orange-800';\r\n      case 'closed_won': return 'bg-green-100 text-green-800';\r\n      case 'closed_lost': return 'bg-red-100 text-red-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'high': return 'bg-red-100 text-red-800';\r\n      case 'medium': return 'bg-yellow-100 text-yellow-800';\r\n      case 'low': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">Generate Leads</h1>\r\n          <p className=\"text-gray-600\">{isEmployee ? 'View your assigned leads' : 'Manage and assign leads to employees'}</p>\r\n        </div>\r\n        {!isEmployee && (\r\n          <div className=\"flex items-center gap-3\">\r\n            <button\r\n              onClick={() => setShowEmailModal(true)}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <Mail size={20} />\r\n              Send Email for Lead Generation\r\n            </button>\r\n            <button\r\n              onClick={() => setShowCreateModal(true)}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\"\r\n            >\r\n              <Plus size={20} />\r\n              Create New Lead\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Total Leads</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{leads.length}</p>\r\n            </div>\r\n            <Target className=\"h-8 w-8 text-blue-600\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">New Leads</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">\r\n                {leads.filter(lead => lead.lead_status === 'new').length}\r\n              </p>\r\n            </div>\r\n            <Bell className=\"h-8 w-8 text-yellow-600\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Assigned Leads</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">\r\n                {isEmployee \r\n                  ? leads.length // All leads in employee view are assigned to them\r\n                  : leads.filter(lead => lead.assigned_to).length\r\n                }\r\n              </p>\r\n            </div>\r\n            <Users className=\"h-8 w-8 text-green-600\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Closed Won</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">\r\n                {leads.filter(lead => lead.lead_status === 'closed_won').length}\r\n              </p>\r\n            </div>\r\n            <CheckCircle className=\"h-8 w-8 text-green-600\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters and Search */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border p-6\">\r\n        <div className=\"flex flex-col md:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Filter className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search leads...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n          </div>\r\n          \r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"all\">All Statuses</option>\r\n            <option value=\"new\">New</option>\r\n            <option value=\"contacted\">Contacted</option>\r\n            <option value=\"qualified\">Qualified</option>\r\n            <option value=\"proposal\">Proposal</option>\r\n            <option value=\"negotiation\">Negotiation</option>\r\n            <option value=\"closed_won\">Closed Won</option>\r\n            <option value=\"closed_lost\">Closed Lost</option>\r\n          </select>\r\n          \r\n          {!isEmployee && (\r\n            <select\r\n              value={employeeFilter}\r\n              onChange={(e) => setEmployeeFilter(e.target.value)}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"all\">All Employees</option>\r\n              {(employees || []).map(employee => (\r\n                <option key={employee.id} value={employee.id}>\r\n                  {employee.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          )}\r\n          \r\n          <select\r\n            value={`${sortBy}-${sortOrder}`}\r\n            onChange={(e) => {\r\n              const [field, order] = e.target.value.split('-');\r\n              setSortBy(field);\r\n              setSortOrder(order);\r\n            }}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n          >\r\n            <option value=\"created_at-desc\">Newest First</option>\r\n            <option value=\"created_at-asc\">Oldest First</option>\r\n            <option value=\"company_name-asc\">Company A-Z</option>\r\n            <option value=\"company_name-desc\">Company Z-A</option>\r\n            <option value=\"priority-desc\">Priority High-Low</option>\r\n            <option value=\"priority-asc\">Priority Low-High</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Leads Table */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Company\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Project\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Priority\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Assigned To\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Created\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {(sortedLeads || []).map(lead => (\r\n                <tr key={lead.id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"flex items-center\">\r\n                      <Building className=\"h-5 w-5 text-gray-400 mr-3\" />\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">\r\n                          {lead.company_name}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          {lead.client_email}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"text-sm text-gray-900\">\r\n                      {lead.project_name || 'N/A'}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-500\">\r\n                      {lead.industry || 'N/A'}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <select\r\n                      value={lead.lead_status}\r\n                      onChange={(e) => handleUpdateLeadStatus(lead.id, e.target.value)}\r\n                      className={`text-xs font-medium px-2 py-1 rounded-full ${getStatusColor(lead.lead_status)} border-0 focus:ring-2 focus:ring-amber-500`}\r\n                    >\r\n                      <option value=\"new\">New</option>\r\n                      <option value=\"contacted\">Contacted</option>\r\n                      <option value=\"qualified\">Qualified</option>\r\n                      <option value=\"proposal\">Proposal</option>\r\n                      <option value=\"negotiation\">Negotiation</option>\r\n                      <option value=\"closed_won\">Closed Won</option>\r\n                      <option value=\"closed_lost\">Closed Lost</option>\r\n                    </select>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(lead.priority)}`}>\r\n                      {lead.priority || 'N/A'}\r\n                    </span>\r\n                    {/* Debug: {JSON.stringify({id: lead.id, priority: lead.priority})} */}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    {isEmployee ? (\r\n                      <div className=\"flex items-center\">\r\n                        <User className=\"h-4 w-4 text-green-600 mr-2\" />\r\n                        <span className=\"text-sm font-medium text-green-700\">\r\n                          You\r\n                        </span>\r\n                      </div>\r\n                    ) : lead.assigned_to ? (\r\n                      <div className=\"flex items-center\">\r\n                        <User className=\"h-4 w-4 text-gray-400 mr-2\" />\r\n                        <span className=\"text-sm text-gray-900\">\r\n                          {lead.assigned_employee_name || 'Unknown'}\r\n                        </span>\r\n                      </div>\r\n                    ) : (\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedLead(lead);\r\n                          setShowAssignModal(true);\r\n                        }}\r\n                        className=\"text-sm text-amber-600 hover:text-amber-700 font-medium\"\r\n                      >\r\n                        Assign\r\n                      </button>\r\n                    )}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                    {new Date(lead.created_at).toLocaleDateString()}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                    {!isEmployee ? (\r\n                      <div className=\"flex space-x-2\">\r\n                        <button\r\n                          onClick={() => handleViewProgressUpdates(lead)}\r\n                          className=\"text-blue-600 hover:text-blue-900\"\r\n                          title=\"View Progress Updates\"\r\n                        >\r\n                          <Eye size={16} />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setSelectedLead(lead);\r\n                            setShowAssignModal(true);\r\n                          }}\r\n                          className=\"text-amber-600 hover:text-amber-900\"\r\n                          title=\"Assign Lead\"\r\n                        >\r\n                          <Send size={16} />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDeleteLead(lead.id)}\r\n                          className=\"text-red-600 hover:text-red-900\"\r\n                          title=\"Delete Lead\"\r\n                        >\r\n                          <Trash2 size={16} />\r\n                        </button>\r\n                      </div>\r\n                    ) : (\r\n                      <span className=\"text-gray-400\">View Only</span>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        \r\n        {sortedLeads.length === 0 && (\r\n          <div className=\"text-center py-12\">\r\n            <Target className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No leads found</h3>\r\n            <p className=\"mt-1 text-sm text-gray-500\">\r\n              {searchTerm || statusFilter !== 'all' || employeeFilter !== 'all'\r\n                ? 'Try adjusting your search or filter criteria.'\r\n                : 'Get started by creating a new lead.'}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Create Lead Modal */}\r\n      {showCreateModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Create New Lead</h2>\r\n              <button\r\n                onClick={() => setShowCreateModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <form onSubmit={handleCreateLead} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Company Name *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={leadForm.company_name}\r\n                    onChange={(e) => setLeadForm({...leadForm, company_name: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Project Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={leadForm.project_name}\r\n                    onChange={(e) => setLeadForm({...leadForm, project_name: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Client Email\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    value={leadForm.client_email}\r\n                    onChange={(e) => setLeadForm({...leadForm, client_email: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Client Phone\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={leadForm.client_phone}\r\n                    onChange={(e) => setLeadForm({...leadForm, client_phone: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Location\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={leadForm.location}\r\n                    onChange={(e) => setLeadForm({...leadForm, location: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Industry\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={leadForm.industry}\r\n                    onChange={(e) => setLeadForm({...leadForm, industry: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Priority\r\n                  </label>\r\n                  <select\r\n                    value={leadForm.priority}\r\n                    onChange={(e) => setLeadForm({...leadForm, priority: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"low\">Low</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"high\">High</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Estimated Value\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={leadForm.estimated_value}\r\n                    onChange={(e) => setLeadForm({...leadForm, estimated_value: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Remarks\r\n                </label>\r\n                <textarea\r\n                  value={leadForm.remarks}\r\n                  onChange={(e) => setLeadForm({...leadForm, remarks: e.target.value})}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Assignment Section */}\r\n              <div className=\"col-span-2 border-t pt-4\">\r\n                <h4 className=\"text-lg font-medium text-gray-900 mb-4\">Assignment Options</h4>\r\n                \r\n                <div className=\"flex items-center mb-4\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"assign_to_employee\"\r\n                    checked={leadForm.assign_to_employee}\r\n                    onChange={(e) => setLeadForm({...leadForm, assign_to_employee: e.target.checked})}\r\n                    className=\"h-4 w-4 text-amber-600 focus:ring-amber-500 border-gray-300 rounded\"\r\n                  />\r\n                  <label htmlFor=\"assign_to_employee\" className=\"ml-2 text-sm font-medium text-gray-700\">\r\n                    Assign this lead to an employee immediately\r\n                  </label>\r\n                </div>\r\n                \r\n                <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                  <div className=\"flex items-start\">\r\n                    <Bell className=\"h-5 w-5 text-blue-600 mt-0.5 mr-2\" />\r\n                    <div className=\"text-sm text-blue-800\">\r\n                      <p className=\"font-medium\">Manager Notification</p>\r\n                      <p>When you assign a lead, the employee's manager will be automatically notified about the assignment and can track progress updates.</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                {leadForm.assign_to_employee && (\r\n                  <div className=\"space-y-4\">\r\n                    {/* Employee Selection */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Employee ID *\r\n                        </label>\r\n                        <input\r\n                          type=\"number\"\r\n                          required={leadForm.assign_to_employee}\r\n                          value={employeeSearchId}\r\n                          onChange={(e) => setEmployeeSearchId(e.target.value)}\r\n                          placeholder=\"Enter Employee ID\"\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                        />\r\n                        {searchedEmployee && (\r\n                          <div className=\"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg\">\r\n                            <p className=\"text-sm text-green-800\">\r\n                              Employee Found: {searchedEmployee.name}\r\n                            </p>\r\n                            <p className=\"text-xs text-green-600\">\r\n                              {searchedEmployee.position} â€¢ {searchedEmployee.department}\r\n                            </p>\r\n                            {searchedEmployee.manager && (\r\n                              <p className=\"text-xs text-green-600 font-medium\">\r\n                                Manager: {searchedEmployee.manager}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                        {employeeSearchId && !searchedEmployee && (\r\n                          <div className=\"mt-2 p-2 bg-red-50 border border-red-200 rounded-lg\">\r\n                            <p className=\"text-sm text-red-800\">\r\n                              Employee not found\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    \r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Due Date\r\n                        </label>\r\n                        <input\r\n                          type=\"date\"\r\n                          value={leadForm.due_date}\r\n                          onChange={(e) => setLeadForm({...leadForm, due_date: e.target.value})}\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div className=\"col-span-2\">\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                          Assignment Notes\r\n                        </label>\r\n                        <textarea\r\n                          value={leadForm.assignment_notes}\r\n                          onChange={(e) => setLeadForm({...leadForm, assignment_notes: e.target.value})}\r\n                          rows={2}\r\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                          placeholder=\"Add specific instructions or notes for the employee...\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end space-x-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowCreateModal(false)}\r\n                  className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\"\r\n                >\r\n                  Create Lead\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Company Management Modal */}\r\n      {showEmailModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-6xl max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Company Management & Email Scheduling</h2>\r\n              <button\r\n                onClick={() => setShowEmailModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Companies Section */}\r\n            <div className=\"mb-8\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Companies</h3>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <select\r\n                    value={industryFilter}\r\n                    onChange={(e) => setIndustryFilter(e.target.value)}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"all\">All Industries</option>\r\n                    {[...new Set((companies || []).map(c => c.industry).filter(Boolean))].map(industry => (\r\n                      <option key={industry} value={industry}>{industry}</option>\r\n                    ))}\r\n                  </select>\r\n                  <select\r\n                    value={emailTypeFilter}\r\n                    onChange={(e) => setEmailTypeFilter(e.target.value)}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"all\">All Companies</option>\r\n                    <option value=\"intro\">Need Intro Email (haven't received)</option>\r\n                    <option value=\"first_followup\">Need First Follow-Up (received intro only)</option>\r\n                    <option value=\"second_followup\">Need Second Follow-Up (received first only)</option>\r\n                    <option value=\"third_followup\">Need Third Follow-Up (received second only)</option>\r\n                    <option value=\"final_followup\">Need Final Follow-Up (received third only)</option>\r\n                  </select>\r\n                  {selectedCompanies.length > 0 && (\r\n                    <button\r\n                      onClick={() => setShowBulkScheduleModal(true)}\r\n                      className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n                    >\r\n                      <Send size={16} />\r\n                      Schedule Bulk Email ({selectedCompanies.length})\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    onClick={() => setShowAddCompanyModal(true)}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    <Plus size={16} />\r\n                    Add Company\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={selectedCompanies.length === getFilteredCompanies().length && getFilteredCompanies().length > 0}\r\n                            onChange={handleSelectAllCompanies}\r\n                            className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                          />\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Company Name\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Email\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Contact Person\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Industry\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Email Type\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Email History\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Status\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Actions\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {getFilteredCompanies().map(company => (\r\n                        <tr key={company.id} className=\"hover:bg-gray-50\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={selectedCompanies.includes(company.id)}\r\n                              onChange={() => handleSelectCompany(company.id)}\r\n                              className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\r\n                            />\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {company.company_name}\r\n                            </div>\r\n                            {company.website && (\r\n                              <div className=\"text-sm text-gray-500\">\r\n                                <a href={company.website} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:text-blue-800\">\r\n                                  {company.website}\r\n                                </a>\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm text-gray-900\">{company.email}</div>\r\n                            {company.phone && (\r\n                              <div className=\"text-sm text-gray-500\">{company.phone}</div>\r\n                            )}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm text-gray-900\">\r\n                              {company.contact_person || 'N/A'}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm text-gray-900\">\r\n                              {company.industry || 'N/A'}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm text-gray-900\">\r\n                              {company.email_type === 'intro' ? 'Email 1: Intro Email' :\r\n                               company.email_type === 'first_followup' ? 'Email 2: First Follow-Up' :\r\n                               company.email_type === 'second_followup' ? 'Email 3: Second Follow-Up' :\r\n                               company.email_type === 'third_followup' ? 'Email 4: Third Follow-Up' :\r\n                               company.email_type === 'final_followup' ? 'Email 5: Final Follow-Up' :\r\n                               'N/A'}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm text-gray-900\">\r\n                              {company.sent_email_types ? (\r\n                                <div className=\"flex flex-wrap gap-1\">\r\n                                  {company.sent_email_types.split(',').map((emailType, index) => {\r\n                                    // Ensure emailType is a string, or default to 'Unknown' if it's an object\r\n                                    const emailTypeStr = typeof emailType === 'object' && emailType !== null\r\n                                                         ? 'Unknown' // Fallback for unexpected object types\r\n                                                         : String(emailType); // Convert to string otherwise\r\n\r\n                                    let displayValue;\r\n                                    switch (emailTypeStr) {\r\n                                      case 'intro': displayValue = '1'; break;\r\n                                      case 'first_followup': displayValue = '2'; break;\r\n                                      case 'second_followup': displayValue = '3'; break;\r\n                                      case 'third_followup': displayValue = '4'; break;\r\n                                      case 'final_followup': displayValue = '5'; break;\r\n                                      default: displayValue = emailTypeStr; // Fallback to the string itself\r\n                                    }\r\n\r\n                                    return (\r\n                                      <span key={index} className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800\">\r\n                                        {displayValue}\r\n                                      </span>\r\n                                    );\r\n                                  })}\r\n                                </div>\r\n                              ) : (\r\n                                <span className=\"text-gray-400 text-xs\">No emails sent</span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                              company.status === 'active' ? 'bg-green-100 text-green-800' :\r\n                              company.status === 'inactive' ? 'bg-yellow-100 text-yellow-800' :\r\n                              'bg-red-100 text-red-800'\r\n                            }`}>\r\n                              {company.status}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  setSelectedCompany(company);\r\n                                  setScheduleForm({ \r\n                                    ...scheduleForm, \r\n                                    company_id: company.id,\r\n                                    email_type: company.email_type || 'intro'\r\n                                  });\r\n                                  setShowScheduleEmailModal(true);\r\n                                }}\r\n                                className=\"text-blue-600 hover:text-blue-900\"\r\n                              >\r\n                                Schedule Email\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleDeleteCompany(company.id)}\r\n                                className=\"text-red-600 hover:text-red-900\"\r\n                              >\r\n                                Delete\r\n                              </button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Scheduled Emails Section */}\r\n            <div>\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Scheduled Emails</h3>\r\n                {(scheduledEmails || []).filter(e => e.status === 'pending').length > 0 && (\r\n                  <button\r\n                    onClick={handleSendAllPendingEmails}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors\"\r\n                  >\r\n                    <Send size={16} />\r\n                    Send All Pending ({(scheduledEmails || []).filter(e => e.status === 'pending').length})\r\n                  </button>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"bg-white rounded-lg shadow-sm border overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Company\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Subject\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Scheduled Time\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Status\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Actions\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {(scheduledEmails || []).map(email => (\r\n                        <tr key={email.id} className=\"hover:bg-gray-50\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {email.company_name}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">{email.email}</div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4\">\r\n                            <div className=\"text-sm text-gray-900 max-w-xs truncate\">\r\n                              {email.subject}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <div className=\"text-sm text-gray-900\">\r\n                              {formatDateTime(email.scheduled_time)}\r\n                            </div>\r\n                            {email.sent_at && (\r\n                              <div className=\"text-xs text-gray-500\">\r\n                                Sent: {formatDateTime(email.sent_at)}\r\n                              </div>\r\n                            )}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                              email.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :\r\n                              email.status === 'sent' ? 'bg-green-100 text-green-800' :\r\n                              email.status === 'failed' ? 'bg-red-100 text-red-800' :\r\n                              'bg-gray-100 text-gray-800'\r\n                            }`}>\r\n                              {email.status}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              {email.status === 'pending' && (\r\n                                <>\r\n                                  <button\r\n                                    onClick={() => handleSendEmailNow(email.id)}\r\n                                    className=\"text-green-600 hover:text-green-900\"\r\n                                  >\r\n                                    Send Now\r\n                                  </button>\r\n                                  <button\r\n                                    onClick={() => handleCancelEmail(email.id)}\r\n                                    className=\"text-red-600 hover:text-red-900\"\r\n                                  >\r\n                                    Cancel\r\n                                  </button>\r\n                                </>\r\n                              )}\r\n                              {email.status === 'sent' && (\r\n                                <span className=\"text-gray-500 text-xs\">\r\n                                  Sent âœ“\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Add Company Modal */}\r\n      {showAddCompanyModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-2xl\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Add New Company</h2>\r\n              <button\r\n                onClick={() => setShowAddCompanyModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <form onSubmit={handleCreateCompany} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Company Name *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    value={companyForm.company_name}\r\n                    onChange={(e) => setCompanyForm({...companyForm, company_name: e.target.value})}\r\n                    placeholder=\"Enter company name\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Email *\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    required\r\n                    value={companyForm.email}\r\n                    onChange={(e) => setCompanyForm({...companyForm, email: e.target.value})}\r\n                    placeholder=\"company@example.com\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Contact Person\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={companyForm.contact_person}\r\n                    onChange={(e) => setCompanyForm({...companyForm, contact_person: e.target.value})}\r\n                    placeholder=\"John Doe\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Phone\r\n                  </label>\r\n                  <input\r\n                    type=\"tel\"\r\n                    value={companyForm.phone}\r\n                    onChange={(e) => setCompanyForm({...companyForm, phone: e.target.value})}\r\n                    placeholder=\"+1 (555) 123-4567\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Industry\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={companyForm.industry}\r\n                    onChange={(e) => setCompanyForm({...companyForm, industry: e.target.value})}\r\n                    placeholder=\"Technology, Healthcare, etc.\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Website\r\n                  </label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={companyForm.website}\r\n                    onChange={(e) => setCompanyForm({...companyForm, website: e.target.value})}\r\n                    placeholder=\"https://www.company.com\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Email Type *\r\n                  </label>\r\n                  <select\r\n                    value={companyForm.email_type}\r\n                    onChange={(e) => setCompanyForm({...companyForm, email_type: e.target.value})}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"intro\">Email 1: Intro Email</option>\r\n                    <option value=\"first_followup\">Email 2: First Follow-Up</option>\r\n                    <option value=\"second_followup\">Email 3: Second Follow-Up</option>\r\n                    <option value=\"third_followup\">Email 4: Third Follow-Up</option>\r\n                    <option value=\"final_followup\">Email 5: Final Follow-Up</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end space-x-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAddCompanyModal(false)}\r\n                  className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Add Company\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Schedule Email Modal */}\r\n      {showScheduleEmailModal && selectedCompany && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Schedule Email</h2>\r\n              <button\r\n                onClick={() => setShowScheduleEmailModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n              <h3 className=\"font-medium text-blue-900\">Company Details</h3>\r\n              <p className=\"text-sm text-blue-800\">{selectedCompany.company_name}</p>\r\n              <p className=\"text-sm text-blue-800\">{selectedCompany.email}</p>\r\n              {selectedCompany.contact_person && (\r\n                <p className=\"text-sm text-blue-800\">Contact: {selectedCompany.contact_person}</p>\r\n              )}\r\n              {selectedCompany.industry && (\r\n                <p className=\"text-sm text-blue-800\">Industry: {selectedCompany.industry}</p>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"mb-4\">\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                Email Type *\r\n              </label>\r\n              <select\r\n                value={scheduleForm.email_type}\r\n                onChange={(e) => setScheduleForm({...scheduleForm, email_type: e.target.value})}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"intro\">Email 1: Intro Email</option>\r\n                <option value=\"first_followup\">Email 2: First Follow-Up</option>\r\n                <option value=\"second_followup\">Email 3: Second Follow-Up</option>\r\n                <option value=\"third_followup\">Email 4: Third Follow-Up</option>\r\n                <option value=\"final_followup\">Email 5: Final Follow-Up</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"mb-4 p-4 bg-gray-50 border border-gray-200 rounded-lg\">\r\n              <h4 className=\"font-medium text-gray-900 mb-2\">Email Template Preview</h4>\r\n              <div className=\"text-sm text-gray-600\">\r\n                <p className=\"mb-1\"><strong>Subject:</strong> {\r\n                  scheduleForm.email_type === 'intro' ? 'Strengthening your digital presence across the Middle East' :\r\n                  scheduleForm.email_type === 'first_followup' ? 'Following up on your digital marketing initiatives' :\r\n                  scheduleForm.email_type === 'second_followup' ? 'Achieving measurable ROI through digital marketing' :\r\n                  scheduleForm.email_type === 'third_followup' ? 'Your reliable partner for digital growth in the Middle East' :\r\n                  scheduleForm.email_type === 'final_followup' ? 'Staying connected for future digital initiatives' :\r\n                  'Let\\'s Connect â€” Explore How We Can Add Value to Your Business'\r\n                }</p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  Template will be personalized with company name and contact person\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <form onSubmit={handleScheduleEmail} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Schedule Date & Time *\r\n                </label>\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  required\r\n                  value={scheduleForm.scheduled_time}\r\n                  onChange={(e) => setScheduleForm({...scheduleForm, scheduled_time: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"p-4 bg-gray-50 border border-gray-200 rounded-lg\">\r\n                <h4 className=\"font-medium text-gray-900 mb-2\">Email Preview</h4>\r\n                <p className=\"text-sm text-gray-600 mb-1\"><strong>Subject:</strong> {\r\n                  scheduleForm.email_type === 'intro' ? 'Strengthening your digital presence across the Middle East' :\r\n                  scheduleForm.email_type === 'first_followup' ? 'Following up on your digital marketing initiatives' :\r\n                  scheduleForm.email_type === 'second_followup' ? 'Achieving measurable ROI through digital marketing' :\r\n                  scheduleForm.email_type === 'third_followup' ? 'Your reliable partner for digital growth in the Middle East' :\r\n                  scheduleForm.email_type === 'final_followup' ? 'Staying connected for future digital initiatives' :\r\n                  'Let\\'s Connect â€” Explore How We Can Add Value to Your Business'\r\n                }</p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  The email will be automatically generated with personalized content for {selectedCompany.company_name}.\r\n                </p>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end space-x-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowScheduleEmailModal(false)}\r\n                  className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2\"\r\n                >\r\n                  <Send size={16} />\r\n                  Schedule Email\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Bulk Schedule Email Modal */}\r\n      {showBulkScheduleModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 pb-8 w-full max-w-lg max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Schedule Bulk Emails</h2>\r\n              <button\r\n                onClick={() => setShowBulkScheduleModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n              <h3 className=\"font-medium text-green-900\">Selected Companies</h3>\r\n              <p className=\"text-sm text-green-800\">\r\n                {selectedCompanies.length} companies selected for bulk email scheduling\r\n              </p>\r\n              <div className=\"mt-2 text-xs text-green-700\">\r\n                {companies.filter(c => selectedCompanies.includes(c.id)).map(c => c.company_name).join(', ')}\r\n              </div>\r\n            </div>\r\n            \r\n            <form onSubmit={handleBulkScheduleEmails} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Schedule Date & Time *\r\n                </label>\r\n                <input\r\n                  type=\"datetime-local\"\r\n                  required\r\n                  value={bulkScheduleForm.scheduled_time}\r\n                  onChange={(e) => setBulkScheduleForm({...bulkScheduleForm, scheduled_time: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Number of Companies per Batch *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  required\r\n                  min=\"1\"\r\n                  value={bulkScheduleForm.batch_size}\r\n                  onChange={(e) => setBulkScheduleForm({...bulkScheduleForm, batch_size: parseInt(e.target.value) || 1})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                  placeholder=\"e.g., 10\"\r\n                />\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  How many companies should receive emails in each batch\r\n                </p>\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Time Interval between Batches (minutes) *\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  required\r\n                  min=\"1\"\r\n                  value={bulkScheduleForm.batch_interval}\r\n                  onChange={(e) => setBulkScheduleForm({...bulkScheduleForm, batch_interval: parseInt(e.target.value) || 1})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                  placeholder=\"e.g., 10\"\r\n                />\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Wait time between sending each batch of emails\r\n                </p>\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Email Type *\r\n                </label>\r\n                <select\r\n                  required\r\n                  value={bulkScheduleForm.email_type || 'intro'}\r\n                  onChange={(e) => setBulkScheduleForm({...bulkScheduleForm, email_type: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"intro\">Intro Email</option>\r\n                  <option value=\"first_followup\">First Follow-Up</option>\r\n                  <option value=\"second_followup\">Second Follow-Up</option>\r\n                  <option value=\"third_followup\">Third Follow-Up</option>\r\n                  <option value=\"final_followup\">Final Follow-Up</option>\r\n                </select>\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Select which type of email to send to all selected companies\r\n                </p>\r\n              </div>\r\n              \r\n              {/* Document Upload - Only for Intro Email */}\r\n              {bulkScheduleForm.email_type === 'intro' && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Attach Document (Optional)\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"*/*\"\r\n                    onChange={(e) => {\r\n                      const file = e.target.files[0];\r\n                      setBulkScheduleForm({...bulkScheduleForm, attachment: file});\r\n                    }}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"\r\n                  />\r\n                  <p className=\"text-xs text-gray-500 mt-1\">\r\n                    Attach any document to include with the intro email (PDF, DOC, XLS, PPT, images, etc.)\r\n                  </p>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"p-4 bg-gray-50 border border-gray-200 rounded-lg\">\r\n                <h4 className=\"font-medium text-gray-900 mb-3\">Email Template Preview</h4>\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"text-sm text-gray-600 leading-relaxed\">\r\n                    <strong className=\"font-semibold\">Template:</strong> {bulkScheduleForm.email_type === 'intro' ? 'Strengthening your digital presence across the Middle East' :\r\n                                            bulkScheduleForm.email_type === 'first_followup' ? 'Following up on your digital marketing initiatives' :\r\n                                            bulkScheduleForm.email_type === 'second_followup' ? 'Achieving measurable ROI through digital marketing' :\r\n                                            bulkScheduleForm.email_type === 'third_followup' ? 'Your reliable partner for digital growth in the Middle East' :\r\n                                            bulkScheduleForm.email_type === 'final_followup' ? 'Staying connected for future digital initiatives' :\r\n                                            'Dynamic templates based on each company\\'s email type and industry'}\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-600\">\r\n                    <strong className=\"font-semibold\">Email Type:</strong> {bulkScheduleForm.email_type === 'intro' ? 'Intro Email' :\r\n                                            bulkScheduleForm.email_type === 'first_followup' ? 'First Follow-Up' :\r\n                                            bulkScheduleForm.email_type === 'second_followup' ? 'Second Follow-Up' :\r\n                                            bulkScheduleForm.email_type === 'third_followup' ? 'Third Follow-Up' :\r\n                                            bulkScheduleForm.email_type === 'final_followup' ? 'Final Follow-Up' :\r\n                                            bulkScheduleForm.email_type}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-500 pt-2\">\r\n                    Each email will be personalized with company name, contact person, and industry-specific content\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end space-x-3 pt-6 pb-2 sticky bottom-0 bg-white\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowBulkScheduleModal(false)}\r\n                  className=\"px-6 py-2.5 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-medium\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 whitespace-nowrap font-medium\"\r\n                >\r\n                  <Send size={16} />\r\n                  <span>Schedule {selectedCompanies.length} Email{selectedCompanies.length !== 1 ? 's' : ''}</span>\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Assign Lead Modal */}\r\n      {showAssignModal && selectedLead && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-bold text-gray-900\">Assign Lead</h2>\r\n              <button\r\n                onClick={() => setShowAssignModal(false)}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"mb-4\">\r\n              <p className=\"text-sm text-gray-600 mb-2\">Assigning lead for:</p>\r\n              <p className=\"font-medium text-gray-900\">{selectedLead.company_name}</p>\r\n              <p className=\"text-sm text-gray-500\">{selectedLead.project_name}</p>\r\n            </div>\r\n            \r\n            <form onSubmit={handleAssignLead} className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Employee ID *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  required\r\n                  placeholder=\"Enter Employee ID (e.g., 50098)\"\r\n                  value={assignForm.employee_id}\r\n                  onChange={(e) => setAssignForm({...assignForm, employee_id: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                />\r\n                {assignForm.employee_id && (\r\n                  <div className=\"mt-2 p-2 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                    {loadingEmployeeDetails ? (\r\n                      <p className=\"text-sm text-blue-600\">Loading employee details...</p>\r\n                    ) : assignEmployeeDetails ? (\r\n                      <div>\r\n                        <p className=\"text-sm text-blue-800 font-medium\">\r\n                          Employee: {assignEmployeeDetails.name}\r\n                        </p>\r\n                        <p className=\"text-xs text-blue-600\">\r\n                          {assignEmployeeDetails.designation || 'No Designation'}\r\n                        </p>\r\n                      </div>\r\n                    ) : (\r\n                      <div>\r\n                        <p className=\"text-sm text-blue-800\">\r\n                          Employee ID: {assignForm.employee_id}\r\n                        </p>\r\n                        <p className=\"text-xs text-red-600\">\r\n                          Employee not found\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Due Date\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={assignForm.due_date}\r\n                  onChange={(e) => setAssignForm({...assignForm, due_date: e.target.value})}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                  Notes\r\n                </label>\r\n                <textarea\r\n                  value={assignForm.notes}\r\n                  onChange={(e) => setAssignForm({...assignForm, notes: e.target.value})}\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent\"\r\n                  placeholder=\"Add any specific instructions or notes...\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"flex justify-end space-x-3 pt-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAssignModal(false)}\r\n                  className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors\"\r\n                >\r\n                  Assign Lead\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Progress Updates Modal */}\r\n      {showProgressUpdates && selectedLeadForUpdates && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] overflow-hidden\">\r\n            <div className=\"p-6 border-b flex justify-between items-center\">\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Progress Updates</h3>\r\n                <p className=\"text-sm text-gray-600 mt-1\">\r\n                  {selectedLeadForUpdates.company_name} - {selectedLeadForUpdates.project_name}\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() => {\r\n                  setShowProgressUpdates(false);\r\n                  setProgressUpdates([]);\r\n                  setSelectedLeadForUpdates(null);\r\n                }}\r\n                className=\"text-gray-400 hover:text-gray-600\"\r\n              >\r\n                <X size={24} />\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\r\n              {progressUpdates.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <FileText className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <p className=\"text-gray-500 mt-2\">No progress updates yet</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-4\">\r\n                  {/* Log Header */}\r\n                  <div className=\"bg-gray-100 p-3 rounded-lg\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Clock className=\"h-4 w-4 text-gray-600\" />\r\n                      <span className=\"text-sm font-semibold text-gray-700\">Complete Activity Log ({progressUpdates.length} entries)</span>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Timeline of Updates */}\r\n                  {progressUpdates.map((update, index) => (\r\n                    <div key={update.id || index} className=\"relative\">\r\n                      {/* Timeline Connector */}\r\n                      {index < progressUpdates.length - 1 && (\r\n                        <div className=\"absolute left-7 top-12 bottom-0 w-0.5 bg-blue-300\"></div>\r\n                      )}\r\n                      \r\n                      <div className=\"border-l-4 border-blue-500 bg-blue-50 p-4 rounded-lg shadow-sm\">\r\n                        <div className=\"flex justify-between items-start mb-2\">\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <div className=\"flex items-center justify-center w-6 h-6 bg-blue-600 rounded-full\">\r\n                              <span className=\"text-xs font-bold text-white\">{index + 1}</span>\r\n                            </div>\r\n                            <div>\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <User className=\"h-4 w-4 text-blue-600\" />\r\n                                <span className=\"font-semibold text-gray-900\">{update.employee_name}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          <span className=\"text-xs text-gray-500\">\r\n                            {new Date(update.created_at).toLocaleString('en-IN', {\r\n                              day: '2-digit',\r\n                              month: '2-digit',\r\n                              year: 'numeric',\r\n                              hour: '2-digit',\r\n                              minute: '2-digit',\r\n                              second: '2-digit'\r\n                            })}\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"mb-2\">\r\n                          <span className=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 capitalize\">\r\n                            {update.status}\r\n                          </span>\r\n                        </div>\r\n                        {update.progress_notes && (\r\n                          <div className=\"mt-2 p-2 bg-white rounded border border-blue-200\">\r\n                            <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">\r\n                              {update.progress_notes}\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenerateLeadsView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}