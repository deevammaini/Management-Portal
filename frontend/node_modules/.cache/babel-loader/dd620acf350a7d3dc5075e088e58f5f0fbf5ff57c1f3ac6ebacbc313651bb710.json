{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Search,Download,Mail,Calendar,Building,User,Phone,MapPin,FileText,CheckCircle,Clock,ArrowUpDown,Filter,Plus,Send,AlertCircle,TrendingUp,Users,FileCheck,BarChart3,RefreshCw,Eye,Trash2}from'lucide-react';import{apiCall}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NDAFormsView=_ref=>{var _selectedForm$nda_sta;let{showNotification}=_ref;const[forms,setForms]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[statusFilter,setStatusFilter]=useState('all');const[sortField,setSortField]=useState('signed_date');const[sortDirection,setSortDirection]=useState('desc');const[selectedForms,setSelectedForms]=useState([]);const[selectedForm,setSelectedForm]=useState(null);const[showDetails,setShowDetails]=useState(false);const[showBulkActions,setShowBulkActions]=useState(false);useEffect(()=>{loadForms();},[]);const loadForms=async()=>{try{setLoading(true);const data=await apiCall('/api/admin/nda-forms');setForms(data);}catch(error){console.error('Error loading forms:',error);showNotification('Failed to load NDA forms','error');}finally{setLoading(false);}};// Calculate summary statistics\nconst getSummaryStats=()=>{const total=forms.length;const pending=forms.filter(f=>f.nda_status==='pending').length;const approved=forms.filter(f=>f.nda_status==='approved').length;const completed=forms.filter(f=>f.nda_status==='completed').length;// This month's submissions\nconst thisMonth=new Date();thisMonth.setDate(1);const thisMonthCount=forms.filter(f=>f.signed_date&&new Date(f.signed_date)>=thisMonth).length;return{total,pending,approved,completed,thisMonthCount};};const stats=getSummaryStats();// Enhanced filtering and sorting\nconst filteredAndSortedForms=forms.filter(form=>{var _form$company_name,_form$reference_numbe,_form$contact_person,_form$email;const matchesSearch=((_form$company_name=form.company_name)===null||_form$company_name===void 0?void 0:_form$company_name.toLowerCase().includes(searchTerm.toLowerCase()))||((_form$reference_numbe=form.reference_number)===null||_form$reference_numbe===void 0?void 0:_form$reference_numbe.toLowerCase().includes(searchTerm.toLowerCase()))||((_form$contact_person=form.contact_person)===null||_form$contact_person===void 0?void 0:_form$contact_person.toLowerCase().includes(searchTerm.toLowerCase()))||((_form$email=form.email)===null||_form$email===void 0?void 0:_form$email.toLowerCase().includes(searchTerm.toLowerCase()));const matchesStatus=statusFilter==='all'||form.nda_status===statusFilter;return matchesSearch&&matchesStatus;}).sort((a,b)=>{let aValue=a[sortField];let bValue=b[sortField];// Handle date sorting\nif(sortField==='signed_date'){aValue=aValue?new Date(aValue):new Date(0);bValue=bValue?new Date(bValue):new Date(0);}// Handle string sorting\nif(typeof aValue==='string'){aValue=aValue.toLowerCase();bValue=bValue.toLowerCase();}if(sortDirection==='asc'){return aValue>bValue?1:-1;}else{return aValue<bValue?1:-1;}});const handleSort=field=>{if(sortField===field){setSortDirection(sortDirection==='asc'?'desc':'asc');}else{setSortField(field);setSortDirection('desc');}};const handleSelectForm=formId=>{setSelectedForms(prev=>prev.includes(formId)?prev.filter(id=>id!==formId):[...prev,formId]);};const handleSelectAll=()=>{if(selectedForms.length===filteredAndSortedForms.length){setSelectedForms([]);}else{setSelectedForms(filteredAndSortedForms.map(f=>f.id));}};const handleBulkAction=async action=>{if(selectedForms.length===0){showNotification('Please select forms first','warning');return;}try{switch(action){case'download':// Download each selected form\nfor(const formId of selectedForms){const form=forms.find(f=>f.id===formId);if(form&&form.reference_number){await handleDownloadNDA(form.reference_number);// Small delay to prevent overwhelming the server\nawait new Promise(resolve=>setTimeout(resolve,500));}}showNotification(\"Downloaded \".concat(selectedForms.length,\" NDA form(s)\"),'success');setSelectedForms([]);break;case'send':// Send reminders for selected forms\nshowNotification(\"Sending reminders to \".concat(selectedForms.length,\" vendor(s)...\"),'info');let successCount=0;for(const formId of selectedForms){const form=forms.find(f=>f.id===formId);if(form&&form.reference_number&&form.email){try{await handleSendCompletedNDA(form.reference_number);successCount++;await new Promise(resolve=>setTimeout(resolve,1000));}catch(error){console.error('Error sending reminder:',error);}}}showNotification(\"Reminders sent to \".concat(successCount,\" vendor(s)\"),'success');setSelectedForms([]);break;case'export':// Export selected forms to CSV\nconst csvData=selectedForms.map(formId=>{const form=forms.find(f=>f.id===formId);return form?{reference:form.reference_number,company:form.company_name,contact:form.contact_person,email:form.email,status:form.nda_status,submitted:form.signed_date}:null;}).filter(Boolean);const csvContent=[['Reference','Company','Contact','Email','Status','Submitted Date'],...csvData.map(row=>[row.reference,row.company,row.contact,row.email,row.status,row.submitted])].map(row=>row.join(',')).join('\\n');const blob=new Blob([csvContent],{type:'text/csv'});const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"nda_export_\".concat(new Date().toISOString().split('T')[0],\".csv\");a.style.display='none';document.body.appendChild(a);a.click();setTimeout(()=>{window.URL.revokeObjectURL(url);document.body.removeChild(a);},100);showNotification(\"Exported \".concat(selectedForms.length,\" NDA form(s)\"),'success');setSelectedForms([]);break;case'delete':// Delete selected forms (with confirmation)\nif(window.confirm(\"Are you sure you want to delete \".concat(selectedForms.length,\" NDA form(s)? This action cannot be undone.\"))){let deletedCount=0;for(const formId of selectedForms){const form=forms.find(f=>f.id===formId);if(form){try{const response=await apiCall(\"/api/admin/nda-forms/\".concat(formId),{method:'DELETE'});if(response.success){deletedCount++;}}catch(error){console.error('Error deleting form:',error);}}}showNotification(\"Deleted \".concat(deletedCount,\" NDA form(s)\"),'success');setSelectedForms([]);loadForms();// Reload the list\n}break;}}catch(error){console.error('Bulk action error:',error);showNotification('Bulk action failed','error');}};const handleDownloadNDA=async referenceNumber=>{try{showNotification('Preparing PDF download...','info');// Use direct fetch for binary data (PDF)\nconst response=await fetch(\"http://localhost:8000/api/admin/download-nda/\".concat(referenceNumber),{method:'GET',headers:{'Accept':'application/pdf'},credentials:'include'});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.error||\"HTTP \".concat(response.status,\": \").concat(response.statusText));}const contentType=response.headers.get('content-type');if(!contentType||!contentType.includes('application/pdf')){throw new Error('Invalid PDF content type received');}const blob=await response.blob();if(blob.size===0){throw new Error('Empty PDF file received');}const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"NDA_\".concat(referenceNumber,\".pdf\");a.style.display='none';document.body.appendChild(a);a.click();setTimeout(()=>{window.URL.revokeObjectURL(url);document.body.removeChild(a);},100);showNotification('NDA PDF downloaded successfully','success');}catch(error){console.error('Download error:',error);showNotification(\"Failed to download PDF: \".concat(error.message),'error');}};const handleSendCompletedNDA=async referenceNumber=>{try{const response=await apiCall('/api/admin/send-completed-nda-email',{method:'POST',body:JSON.stringify({reference_number:referenceNumber})});if(response.success){showNotification('Completed NDA sent to vendor email','success');}else{showNotification('Failed to send completed NDA','error');}}catch(error){console.error('Send email error:',error);showNotification('Failed to send completed NDA','error');}};const formatDate=dateString=>{if(!dateString)return'N/A';const date=new Date(dateString);const now=new Date();const diffTime=Math.abs(now-date);const diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays===1)return'Yesterday';if(diffDays<7)return\"\".concat(diffDays,\" days ago\");return date.toLocaleDateString('en-GB',{day:'numeric',month:'short',year:'numeric'});};const getStatusColor=status=>{switch(status){case'completed':return'bg-blue-100 text-blue-700 border-blue-200';case'approved':return'bg-green-100 text-green-700 border-green-200';case'pending':return'bg-yellow-100 text-yellow-700 border-yellow-200';case'rejected':return'bg-red-100 text-red-700 border-red-200';default:return'bg-gray-100 text-gray-700 border-gray-200';}};const getStatusIcon=status=>{switch(status){case'completed':return/*#__PURE__*/_jsx(CheckCircle,{size:16});case'approved':return/*#__PURE__*/_jsx(CheckCircle,{size:16});case'pending':return/*#__PURE__*/_jsx(Clock,{size:16});case'rejected':return/*#__PURE__*/_jsx(AlertCircle,{size:16});default:return/*#__PURE__*/_jsx(Clock,{size:16});}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Submitted NDA Forms\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-1\",children:[stats.total,\" forms\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:loadForms,className:\"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(RefreshCw,{size:16}),\"Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowBulkActions(!showBulkActions),className:\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{size:16}),\"Bulk Actions\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Total Forms\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:stats.total})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(FileText,{className:\"text-blue-600\",size:24})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Pending Review\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-yellow-600\",children:stats.pending})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Clock,{className:\"text-yellow-600\",size:24})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-600\",children:stats.approved})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"text-green-600\",size:24})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-blue-600\",children:stats.completed})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(FileCheck,{className:\"text-blue-600\",size:24})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600\",children:\"This Month\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-600\",children:stats.thisMonthCount})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(TrendingUp,{className:\"text-purple-600\",size:24})})]})})]}),showBulkActions&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Bulk Actions\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[selectedForms.length,\" forms selected\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleBulkAction('download'),className:\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Download Selected\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleBulkAction('send'),className:\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\",children:[/*#__PURE__*/_jsx(Send,{size:16}),\"Send Reminders\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleBulkAction('export'),className:\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\",children:[/*#__PURE__*/_jsx(BarChart3,{size:16}),\"Export Data\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleBulkAction('delete'),className:\"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\",children:[/*#__PURE__*/_jsx(Trash2,{size:16}),\"Delete Selected\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\",size:20}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),placeholder:\"Search by company, reference number, contact person, or email...\",className:\"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"approved\",children:\"Approved\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rejected\",children:\"Rejected\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 px-4 py-3 border rounded-lg hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(Filter,{size:16}),\"More Filters\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedForms.length===filteredAndSortedForms.length&&filteredAndSortedForms.length>0,onChange:handleSelectAll,className:\"w-4 h-4 text-blue-600 rounded\"})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\",onClick:()=>handleSort('reference_number'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[\"Reference\",/*#__PURE__*/_jsx(ArrowUpDown,{size:14})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\",onClick:()=>handleSort('company_name'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[\"Company\",/*#__PURE__*/_jsx(ArrowUpDown,{size:14})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\",onClick:()=>handleSort('nda_status'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[\"Status\",/*#__PURE__*/_jsx(ArrowUpDown,{size:14})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\",onClick:()=>handleSort('signed_date'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[\"Submitted\",/*#__PURE__*/_jsx(ArrowUpDown,{size:14})]})}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y\",children:filteredAndSortedForms.map(form=>{var _form$company_name2,_form$nda_status;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedForms.includes(form.id),onChange:()=>handleSelectForm(form.id),className:\"w-4 h-4 text-blue-600 rounded\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FileText,{className:\"text-blue-500\",size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"font-mono text-sm font-medium\",children:form.reference_number})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:((_form$company_name2=form.company_name)===null||_form$company_name2===void 0?void 0:_form$company_name2[0])||'?'})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:form.company_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:form.email})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:form.contact_person}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Phone,{size:12}),form.phone]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full border \".concat(getStatusColor(form.nda_status)),children:[getStatusIcon(form.nda_status),(_form$nda_status=form.nda_status)===null||_form$nda_status===void 0?void 0:_form$nda_status.toUpperCase()]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Calendar,{size:14}),formatDate(form.signed_date)]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedForm(form);setShowDetails(true);},className:\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\",title:\"View Details\",children:/*#__PURE__*/_jsx(Eye,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownloadNDA(form.reference_number),className:\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors\",title:\"Download NDA\",children:/*#__PURE__*/_jsx(Download,{size:16})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSendCompletedNDA(form.reference_number),className:\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\",title:\"Send to Vendor\",children:/*#__PURE__*/_jsx(Mail,{size:16})})]})})]},form.id);})})]})}),filteredAndSortedForms.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-16\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(FileText,{className:\"text-gray-400\",size:48})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:searchTerm||statusFilter!=='all'?'No forms match your criteria':'No NDA forms submitted yet'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6 max-w-md mx-auto\",children:searchTerm||statusFilter!=='all'?'Try adjusting your search or filter criteria to find what you\\'re looking for.':'NDA forms will appear here once vendors complete the submission process. You can send NDAs to vendors to get started.'}),!searchTerm&&statusFilter==='all'&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 justify-center\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors\",children:[/*#__PURE__*/_jsx(Send,{size:16}),\"Send First NDA\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(Users,{size:16}),\"Import Vendors\"]})]})]})]}),showDetails&&selectedForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold\",children:\"NDA Form Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetails(false),className:\"text-gray-400 hover:text-gray-600 transition-colors\",children:\"\\u2715\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 overflow-y-auto flex-1 modal-scrollbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Building,{size:20}),\"Company Information\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Company Name:\"}),\" \",selectedForm.company_name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Registration Number:\"}),\" \",selectedForm.company_registration_number]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Country:\"}),\" \",selectedForm.company_incorporation_country]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"State:\"}),\" \",selectedForm.company_incorporation_state]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(User,{size:20}),\"Contact Information\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Contact Person:\"}),\" \",selectedForm.contact_person]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Email:\"}),\" \",selectedForm.email]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Phone:\"}),\" \",selectedForm.phone]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{size:16,className:\"mt-0.5 text-gray-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Address:\"}),\" \",selectedForm.address]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900\",children:\"Form Status & Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Reference Number\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-mono text-lg font-bold\",children:selectedForm.reference_number})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full border \".concat(getStatusColor(selectedForm.nda_status)),children:[getStatusIcon(selectedForm.nda_status),(_selectedForm$nda_sta=selectedForm.nda_status)===null||_selectedForm$nda_sta===void 0?void 0:_selectedForm$nda_sta.toUpperCase()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Signed Date\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:formatDate(selectedForm.signed_date)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Portal Access\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:selectedForm.portal_access?'Granted':'Pending'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900\",children:\"Signature & Documentation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Signature Type\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium capitalize\",children:selectedForm.signature_type||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Signature Provided\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:selectedForm.has_signature?'Yes':'No'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-600\",children:\"Company Stamp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:selectedForm.has_company_stamp?'Yes':'No'})]})]}),selectedForm.has_signature&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-gray-900 mb-3\",children:\"Digital Signature\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border-2 border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:selectedForm.signature_data,alt:\"Digital Signature\",className:\"max-w-full h-auto border border-gray-300 rounded\",style:{maxHeight:'200px'}}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:[\"Signature Type: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium capitalize\",children:selectedForm.signature_type})]})]})]}),selectedForm.has_company_stamp&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-gray-900 mb-3\",children:\"Company Stamp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-2 border-gray-200 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"img\",{src:selectedForm.company_stamp_data,alt:\"Company Stamp\",className:\"max-w-full h-auto border border-gray-300 rounded\",style:{maxHeight:'200px'}})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-t flex-shrink-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDownloadNDA(selectedForm.reference_number),className:\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\",children:[/*#__PURE__*/_jsx(Download,{size:16}),\"Download NDA PDF\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSendCompletedNDA(selectedForm.reference_number),className:\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\",children:[/*#__PURE__*/_jsx(Mail,{size:16}),\"Send to Vendor\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetails(false),className:\"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Close\"})]})})]})})]});};export default NDAFormsView;","map":{"version":3,"names":["React","useState","useEffect","Search","Download","Mail","Calendar","Building","User","Phone","MapPin","FileText","CheckCircle","Clock","ArrowUpDown","Filter","Plus","Send","AlertCircle","TrendingUp","Users","FileCheck","BarChart3","RefreshCw","Eye","Trash2","apiCall","jsx","_jsx","jsxs","_jsxs","NDAFormsView","_ref","_selectedForm$nda_sta","showNotification","forms","setForms","loading","setLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","sortField","setSortField","sortDirection","setSortDirection","selectedForms","setSelectedForms","selectedForm","setSelectedForm","showDetails","setShowDetails","showBulkActions","setShowBulkActions","loadForms","data","error","console","getSummaryStats","total","length","pending","filter","f","nda_status","approved","completed","thisMonth","Date","setDate","thisMonthCount","signed_date","stats","filteredAndSortedForms","form","_form$company_name","_form$reference_numbe","_form$contact_person","_form$email","matchesSearch","company_name","toLowerCase","includes","reference_number","contact_person","email","matchesStatus","sort","a","b","aValue","bValue","handleSort","field","handleSelectForm","formId","prev","id","handleSelectAll","map","handleBulkAction","action","find","handleDownloadNDA","Promise","resolve","setTimeout","concat","successCount","handleSendCompletedNDA","csvData","reference","company","contact","status","submitted","Boolean","csvContent","row","join","blob","Blob","type","url","window","URL","createObjectURL","document","createElement","href","download","toISOString","split","style","display","body","appendChild","click","revokeObjectURL","removeChild","confirm","deletedCount","response","method","success","referenceNumber","fetch","headers","credentials","ok","errorData","json","catch","Error","statusText","contentType","get","size","message","JSON","stringify","formatDate","dateString","date","now","diffTime","Math","abs","diffDays","ceil","toLocaleDateString","day","month","year","getStatusColor","getStatusIcon","className","children","onClick","value","onChange","e","target","placeholder","checked","_form$company_name2","_form$nda_status","phone","toUpperCase","title","company_registration_number","company_incorporation_country","company_incorporation_state","address","portal_access","signature_type","has_signature","has_company_stamp","src","signature_data","alt","maxHeight","company_stamp_data"],"sources":["C:/Users/YSXP/Desktop/New folder/frontend/src/components/NDAFormsView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Search, Download, Mail, Calendar, Building, User, Phone, MapPin, FileText, \r\n  CheckCircle, Clock, ArrowUpDown, Filter, Plus, Send, AlertCircle, \r\n  TrendingUp, Users, FileCheck, BarChart3, RefreshCw, Eye, Trash2\r\n} from 'lucide-react';\r\nimport { apiCall } from '../utils/api';\r\n\r\nconst NDAFormsView = ({ showNotification }) => {\r\n  const [forms, setForms] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [sortField, setSortField] = useState('signed_date');\r\n  const [sortDirection, setSortDirection] = useState('desc');\r\n  const [selectedForms, setSelectedForms] = useState([]);\r\n  const [selectedForm, setSelectedForm] = useState(null);\r\n  const [showDetails, setShowDetails] = useState(false);\r\n  const [showBulkActions, setShowBulkActions] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadForms();\r\n  }, []);\r\n\r\n  const loadForms = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await apiCall('/api/admin/nda-forms');\r\n      setForms(data);\r\n    } catch (error) {\r\n      console.error('Error loading forms:', error);\r\n      showNotification('Failed to load NDA forms', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Calculate summary statistics\r\n  const getSummaryStats = () => {\r\n    const total = forms.length;\r\n    const pending = forms.filter(f => f.nda_status === 'pending').length;\r\n    const approved = forms.filter(f => f.nda_status === 'approved').length;\r\n    const completed = forms.filter(f => f.nda_status === 'completed').length;\r\n    \r\n    // This month's submissions\r\n    const thisMonth = new Date();\r\n    thisMonth.setDate(1);\r\n    const thisMonthCount = forms.filter(f => \r\n      f.signed_date && new Date(f.signed_date) >= thisMonth\r\n    ).length;\r\n\r\n    return { total, pending, approved, completed, thisMonthCount };\r\n  };\r\n\r\n  const stats = getSummaryStats();\r\n\r\n  // Enhanced filtering and sorting\r\n  const filteredAndSortedForms = forms\r\n    .filter(form => {\r\n      const matchesSearch = \r\n        form.company_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        form.reference_number?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        form.contact_person?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        form.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n      \r\n      const matchesStatus = statusFilter === 'all' || form.nda_status === statusFilter;\r\n      \r\n      return matchesSearch && matchesStatus;\r\n    })\r\n    .sort((a, b) => {\r\n      let aValue = a[sortField];\r\n      let bValue = b[sortField];\r\n      \r\n      // Handle date sorting\r\n      if (sortField === 'signed_date') {\r\n        aValue = aValue ? new Date(aValue) : new Date(0);\r\n        bValue = bValue ? new Date(bValue) : new Date(0);\r\n      }\r\n      \r\n      // Handle string sorting\r\n      if (typeof aValue === 'string') {\r\n        aValue = aValue.toLowerCase();\r\n        bValue = bValue.toLowerCase();\r\n      }\r\n      \r\n      if (sortDirection === 'asc') {\r\n        return aValue > bValue ? 1 : -1;\r\n      } else {\r\n        return aValue < bValue ? 1 : -1;\r\n      }\r\n    });\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('desc');\r\n    }\r\n  };\r\n\r\n  const handleSelectForm = (formId) => {\r\n    setSelectedForms(prev => \r\n      prev.includes(formId) \r\n        ? prev.filter(id => id !== formId)\r\n        : [...prev, formId]\r\n    );\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedForms.length === filteredAndSortedForms.length) {\r\n      setSelectedForms([]);\r\n    } else {\r\n      setSelectedForms(filteredAndSortedForms.map(f => f.id));\r\n    }\r\n  };\r\n\r\n  const handleBulkAction = async (action) => {\r\n    if (selectedForms.length === 0) {\r\n      showNotification('Please select forms first', 'warning');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      switch (action) {\r\n        case 'download':\r\n          // Download each selected form\r\n          for (const formId of selectedForms) {\r\n            const form = forms.find(f => f.id === formId);\r\n            if (form && form.reference_number) {\r\n              await handleDownloadNDA(form.reference_number);\r\n              // Small delay to prevent overwhelming the server\r\n              await new Promise(resolve => setTimeout(resolve, 500));\r\n            }\r\n          }\r\n          showNotification(`Downloaded ${selectedForms.length} NDA form(s)`, 'success');\r\n          setSelectedForms([]);\r\n          break;\r\n        case 'send':\r\n          // Send reminders for selected forms\r\n          showNotification(`Sending reminders to ${selectedForms.length} vendor(s)...`, 'info');\r\n          let successCount = 0;\r\n          for (const formId of selectedForms) {\r\n            const form = forms.find(f => f.id === formId);\r\n            if (form && form.reference_number && form.email) {\r\n              try {\r\n                await handleSendCompletedNDA(form.reference_number);\r\n                successCount++;\r\n                await new Promise(resolve => setTimeout(resolve, 1000));\r\n              } catch (error) {\r\n                console.error('Error sending reminder:', error);\r\n              }\r\n            }\r\n          }\r\n          showNotification(`Reminders sent to ${successCount} vendor(s)`, 'success');\r\n          setSelectedForms([]);\r\n          break;\r\n        case 'export':\r\n          // Export selected forms to CSV\r\n          const csvData = selectedForms.map(formId => {\r\n            const form = forms.find(f => f.id === formId);\r\n            return form ? {\r\n              reference: form.reference_number,\r\n              company: form.company_name,\r\n              contact: form.contact_person,\r\n              email: form.email,\r\n              status: form.nda_status,\r\n              submitted: form.signed_date\r\n            } : null;\r\n          }).filter(Boolean);\r\n          \r\n          const csvContent = [\r\n            ['Reference', 'Company', 'Contact', 'Email', 'Status', 'Submitted Date'],\r\n            ...csvData.map(row => [\r\n              row.reference,\r\n              row.company,\r\n              row.contact,\r\n              row.email,\r\n              row.status,\r\n              row.submitted\r\n            ])\r\n          ].map(row => row.join(',')).join('\\n');\r\n          \r\n          const blob = new Blob([csvContent], { type: 'text/csv' });\r\n          const url = window.URL.createObjectURL(blob);\r\n          const a = document.createElement('a');\r\n          a.href = url;\r\n          a.download = `nda_export_${new Date().toISOString().split('T')[0]}.csv`;\r\n          a.style.display = 'none';\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          setTimeout(() => {\r\n            window.URL.revokeObjectURL(url);\r\n            document.body.removeChild(a);\r\n          }, 100);\r\n          \r\n          showNotification(`Exported ${selectedForms.length} NDA form(s)`, 'success');\r\n          setSelectedForms([]);\r\n          break;\r\n        case 'delete':\r\n          // Delete selected forms (with confirmation)\r\n          if (window.confirm(`Are you sure you want to delete ${selectedForms.length} NDA form(s)? This action cannot be undone.`)) {\r\n            let deletedCount = 0;\r\n            for (const formId of selectedForms) {\r\n              const form = forms.find(f => f.id === formId);\r\n              if (form) {\r\n                try {\r\n                  const response = await apiCall(`/api/admin/nda-forms/${formId}`, {\r\n                    method: 'DELETE'\r\n                  });\r\n                  if (response.success) {\r\n                    deletedCount++;\r\n                  }\r\n                } catch (error) {\r\n                  console.error('Error deleting form:', error);\r\n                }\r\n              }\r\n            }\r\n            showNotification(`Deleted ${deletedCount} NDA form(s)`, 'success');\r\n            setSelectedForms([]);\r\n            loadForms(); // Reload the list\r\n          }\r\n          break;\r\n      }\r\n    } catch (error) {\r\n      console.error('Bulk action error:', error);\r\n      showNotification('Bulk action failed', 'error');\r\n    }\r\n  };\r\n\r\n  const handleDownloadNDA = async (referenceNumber) => {\r\n    try {\r\n      showNotification('Preparing PDF download...', 'info');\r\n      \r\n      // Use direct fetch for binary data (PDF)\r\n      const response = await fetch(`http://localhost:8000/api/admin/download-nda/${referenceNumber}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Accept': 'application/pdf',\r\n        },\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || `HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const contentType = response.headers.get('content-type');\r\n      if (!contentType || !contentType.includes('application/pdf')) {\r\n        throw new Error('Invalid PDF content type received');\r\n      }\r\n      \r\n      const blob = await response.blob();\r\n      \r\n      if (blob.size === 0) {\r\n        throw new Error('Empty PDF file received');\r\n      }\r\n      \r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `NDA_${referenceNumber}.pdf`;\r\n      a.style.display = 'none';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      \r\n      setTimeout(() => {\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(a);\r\n      }, 100);\r\n      \r\n      showNotification('NDA PDF downloaded successfully', 'success');\r\n    } catch (error) {\r\n      console.error('Download error:', error);\r\n      showNotification(`Failed to download PDF: ${error.message}`, 'error');\r\n    }\r\n  };\r\n\r\n  const handleSendCompletedNDA = async (referenceNumber) => {\r\n    try {\r\n      const response = await apiCall('/api/admin/send-completed-nda-email', {\r\n        method: 'POST',\r\n        body: JSON.stringify({ reference_number: referenceNumber })\r\n      });\r\n      \r\n      if (response.success) {\r\n        showNotification('Completed NDA sent to vendor email', 'success');\r\n      } else {\r\n        showNotification('Failed to send completed NDA', 'error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Send email error:', error);\r\n      showNotification('Failed to send completed NDA', 'error');\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffTime = Math.abs(now - date);\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n    \r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays} days ago`;\r\n    \r\n    return date.toLocaleDateString('en-GB', {\r\n      day: 'numeric',\r\n      month: 'short',\r\n      year: 'numeric'\r\n    });\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'completed': return 'bg-blue-100 text-blue-700 border-blue-200';\r\n      case 'approved': return 'bg-green-100 text-green-700 border-green-200';\r\n      case 'pending': return 'bg-yellow-100 text-yellow-700 border-yellow-200';\r\n      case 'rejected': return 'bg-red-100 text-red-700 border-red-200';\r\n      default: return 'bg-gray-100 text-gray-700 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed': return <CheckCircle size={16} />;\r\n      case 'approved': return <CheckCircle size={16} />;\r\n      case 'pending': return <Clock size={16} />;\r\n      case 'rejected': return <AlertCircle size={16} />;\r\n      default: return <Clock size={16} />;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">Submitted NDA Forms</h2>\r\n          <p className=\"text-gray-600 mt-1\">{stats.total} forms</p>\r\n        </div>\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={loadForms}\r\n            className=\"flex items-center gap-2 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\r\n          >\r\n            <RefreshCw size={16} />\r\n            Refresh\r\n          </button>\r\n          <button\r\n            onClick={() => setShowBulkActions(!showBulkActions)}\r\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\r\n          >\r\n            <Plus size={16} />\r\n            Bulk Actions\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6\">\r\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Total Forms</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.total}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n              <FileText className=\"text-blue-600\" size={24} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Pending Review</p>\r\n              <p className=\"text-2xl font-bold text-yellow-600\">{stats.pending}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center\">\r\n              <Clock className=\"text-yellow-600\" size={24} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Approved</p>\r\n              <p className=\"text-2xl font-bold text-green-600\">{stats.approved}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\r\n              <CheckCircle className=\"text-green-600\" size={24} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">Completed</p>\r\n              <p className=\"text-2xl font-bold text-blue-600\">{stats.completed}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n              <FileCheck className=\"text-blue-600\" size={24} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm font-medium text-gray-600\">This Month</p>\r\n              <p className=\"text-2xl font-bold text-purple-600\">{stats.thisMonthCount}</p>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center\">\r\n              <TrendingUp className=\"text-purple-600\" size={24} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bulk Actions */}\r\n      {showBulkActions && (\r\n        <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-semibold\">Bulk Actions</h3>\r\n            <span className=\"text-sm text-gray-600\">{selectedForms.length} forms selected</span>\r\n          </div>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => handleBulkAction('download')}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\"\r\n            >\r\n              <Download size={16} />\r\n              Download Selected\r\n            </button>\r\n            <button\r\n              onClick={() => handleBulkAction('send')}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\r\n            >\r\n              <Send size={16} />\r\n              Send Reminders\r\n            </button>\r\n            <button\r\n              onClick={() => handleBulkAction('export')}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\"\r\n            >\r\n              <BarChart3 size={16} />\r\n              Export Data\r\n            </button>\r\n            <button\r\n              onClick={() => handleBulkAction('delete')}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors\"\r\n            >\r\n              <Trash2 size={16} />\r\n              Delete Selected\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Search and Filter */}\r\n      <div className=\"bg-white rounded-xl shadow-sm border\">\r\n        <div className=\"p-6 border-b\">\r\n          <div className=\"flex flex-col lg:flex-row gap-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\r\n              <input\r\n                type=\"text\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                placeholder=\"Search by company, reference number, contact person, or email...\"\r\n                className=\"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500\"\r\n              />\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <select\r\n                value={statusFilter}\r\n                onChange={(e) => setStatusFilter(e.target.value)}\r\n                className=\"px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500\"\r\n              >\r\n                <option value=\"all\">All Status</option>\r\n                <option value=\"pending\">Pending</option>\r\n                <option value=\"approved\">Approved</option>\r\n                <option value=\"completed\">Completed</option>\r\n                <option value=\"rejected\">Rejected</option>\r\n              </select>\r\n              <button className=\"flex items-center gap-2 px-4 py-3 border rounded-lg hover:bg-gray-50 transition-colors\">\r\n                <Filter size={16} />\r\n                More Filters\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Forms Table */}\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedForms.length === filteredAndSortedForms.length && filteredAndSortedForms.length > 0}\r\n                    onChange={handleSelectAll}\r\n                    className=\"w-4 h-4 text-blue-600 rounded\"\r\n                  />\r\n                </th>\r\n                <th \r\n                  className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\"\r\n                  onClick={() => handleSort('reference_number')}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    Reference\r\n                    <ArrowUpDown size={14} />\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\"\r\n                  onClick={() => handleSort('company_name')}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    Company\r\n                    <ArrowUpDown size={14} />\r\n                  </div>\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase\">Contact</th>\r\n                <th \r\n                  className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\"\r\n                  onClick={() => handleSort('nda_status')}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    Status\r\n                    <ArrowUpDown size={14} />\r\n                  </div>\r\n                </th>\r\n                <th \r\n                  className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100\"\r\n                  onClick={() => handleSort('signed_date')}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    Submitted\r\n                    <ArrowUpDown size={14} />\r\n                  </div>\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y\">\r\n              {filteredAndSortedForms.map(form => (\r\n                <tr key={form.id} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-6 py-4\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedForms.includes(form.id)}\r\n                      onChange={() => handleSelectForm(form.id)}\r\n                      className=\"w-4 h-4 text-blue-600 rounded\"\r\n                    />\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <FileText className=\"text-blue-500\" size={16} />\r\n                      <span className=\"font-mono text-sm font-medium\">{form.reference_number}</span>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className=\"w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center\">\r\n                        <span className=\"text-white font-semibold\">{form.company_name?.[0] || '?'}</span>\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-medium\">{form.company_name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{form.email}</div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div>\r\n                      <div className=\"font-medium\">{form.contact_person}</div>\r\n                      <div className=\"text-sm text-gray-500 flex items-center gap-1\">\r\n                        <Phone size={12} />\r\n                        {form.phone}\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <span className={`inline-flex items-center gap-1 px-3 py-1 text-xs font-semibold rounded-full border ${getStatusColor(form.nda_status)}`}>\r\n                      {getStatusIcon(form.nda_status)}\r\n                      {form.nda_status?.toUpperCase()}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex items-center gap-1 text-sm text-gray-600\">\r\n                      <Calendar size={14} />\r\n                      {formatDate(form.signed_date)}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedForm(form);\r\n                          setShowDetails(true);\r\n                        }}\r\n                        className=\"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\r\n                        title=\"View Details\"\r\n                      >\r\n                        <Eye size={16} />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDownloadNDA(form.reference_number)}\r\n                        className=\"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\r\n                        title=\"Download NDA\"\r\n                      >\r\n                        <Download size={16} />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleSendCompletedNDA(form.reference_number)}\r\n                        className=\"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\r\n                        title=\"Send to Vendor\"\r\n                      >\r\n                        <Mail size={16} />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Empty State */}\r\n        {filteredAndSortedForms.length === 0 && (\r\n          <div className=\"text-center py-16\">\r\n            <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n              <FileText className=\"text-gray-400\" size={48} />\r\n            </div>\r\n            <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n              {searchTerm || statusFilter !== 'all' ? 'No forms match your criteria' : 'No NDA forms submitted yet'}\r\n            </h3>\r\n            <p className=\"text-gray-500 mb-6 max-w-md mx-auto\">\r\n              {searchTerm || statusFilter !== 'all' \r\n                ? 'Try adjusting your search or filter criteria to find what you\\'re looking for.'\r\n                : 'NDA forms will appear here once vendors complete the submission process. You can send NDAs to vendors to get started.'\r\n              }\r\n            </p>\r\n            {!searchTerm && statusFilter === 'all' && (\r\n              <div className=\"flex gap-3 justify-center\">\r\n                <button className=\"flex items-center gap-2 px-6 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors\">\r\n                  <Send size={16} />\r\n                  Send First NDA\r\n                </button>\r\n                <button className=\"flex items-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\">\r\n                  <Users size={16} />\r\n                  Import Vendors\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Form Details Modal */}\r\n      {showDetails && selectedForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n            <div className=\"p-6 border-b flex-shrink-0\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <h3 className=\"text-xl font-bold\">NDA Form Details</h3>\r\n                <button\r\n                  onClick={() => setShowDetails(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                  \r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"p-6 overflow-y-auto flex-1 modal-scrollbar\">\r\n              {/* Basic Information */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"font-semibold text-gray-900 flex items-center gap-2\">\r\n                    <Building size={20} />\r\n                    Company Information\r\n                  </h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div><span className=\"font-medium\">Company Name:</span> {selectedForm.company_name}</div>\r\n                    <div><span className=\"font-medium\">Registration Number:</span> {selectedForm.company_registration_number}</div>\r\n                    <div><span className=\"font-medium\">Country:</span> {selectedForm.company_incorporation_country}</div>\r\n                    <div><span className=\"font-medium\">State:</span> {selectedForm.company_incorporation_state}</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"space-y-4\">\r\n                  <h4 className=\"font-semibold text-gray-900 flex items-center gap-2\">\r\n                    <User size={20} />\r\n                    Contact Information\r\n                  </h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div><span className=\"font-medium\">Contact Person:</span> {selectedForm.contact_person}</div>\r\n                    <div><span className=\"font-medium\">Email:</span> {selectedForm.email}</div>\r\n                    <div><span className=\"font-medium\">Phone:</span> {selectedForm.phone}</div>\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <MapPin size={16} className=\"mt-0.5 text-gray-400\" />\r\n                      <span><span className=\"font-medium\">Address:</span> {selectedForm.address}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Form Status */}\r\n              <div className=\"space-y-4 mb-6\">\r\n                <h4 className=\"font-semibold text-gray-900\">Form Status & Details</h4>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Reference Number</div>\r\n                    <div className=\"font-mono text-lg font-bold\">{selectedForm.reference_number}</div>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Status</div>\r\n                    <span className={`inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full border ${getStatusColor(selectedForm.nda_status)}`}>\r\n                      {getStatusIcon(selectedForm.nda_status)}\r\n                      {selectedForm.nda_status?.toUpperCase()}\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Signed Date</div>\r\n                    <div className=\"font-medium\">{formatDate(selectedForm.signed_date)}</div>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Portal Access</div>\r\n                    <div className=\"font-medium\">{selectedForm.portal_access ? 'Granted' : 'Pending'}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Signature Information */}\r\n              <div className=\"space-y-4 mb-6\">\r\n                <h4 className=\"font-semibold text-gray-900\">Signature & Documentation</h4>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Signature Type</div>\r\n                    <div className=\"font-medium capitalize\">{selectedForm.signature_type || 'N/A'}</div>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Signature Provided</div>\r\n                    <div className=\"font-medium\">{selectedForm.has_signature ? 'Yes' : 'No'}</div>\r\n                  </div>\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <div className=\"text-sm font-medium text-gray-600\">Company Stamp</div>\r\n                    <div className=\"font-medium\">{selectedForm.has_company_stamp ? 'Yes' : 'No'}</div>\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* Signature Display */}\r\n                {selectedForm.has_signature && (\r\n                  <div className=\"mt-6\">\r\n                    <h5 className=\"font-semibold text-gray-900 mb-3\">Digital Signature</h5>\r\n                    <div className=\"bg-white border-2 border-gray-200 rounded-lg p-4\">\r\n                      <img \r\n                        src={selectedForm.signature_data} \r\n                        alt=\"Digital Signature\" \r\n                        className=\"max-w-full h-auto border border-gray-300 rounded\"\r\n                        style={{ maxHeight: '200px' }}\r\n                      />\r\n                      <p className=\"text-sm text-gray-600 mt-2\">\r\n                        Signature Type: <span className=\"font-medium capitalize\">{selectedForm.signature_type}</span>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Company Stamp Display */}\r\n                {selectedForm.has_company_stamp && (\r\n                  <div className=\"mt-6\">\r\n                    <h5 className=\"font-semibold text-gray-900 mb-3\">Company Stamp</h5>\r\n                    <div className=\"bg-white border-2 border-gray-200 rounded-lg p-4\">\r\n                      <img \r\n                        src={selectedForm.company_stamp_data} \r\n                        alt=\"Company Stamp\" \r\n                        className=\"max-w-full h-auto border border-gray-300 rounded\"\r\n                        style={{ maxHeight: '200px' }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"p-6 border-t flex-shrink-0\">\r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  onClick={() => handleDownloadNDA(selectedForm.reference_number)}\r\n                  className=\"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors\"\r\n                >\r\n                  <Download size={16} />\r\n                  Download NDA PDF\r\n                </button>\r\n                <button\r\n                  onClick={() => handleSendCompletedNDA(selectedForm.reference_number)}\r\n                  className=\"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors\"\r\n                >\r\n                  <Mail size={16} />\r\n                  Send to Vendor\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowDetails(false)}\r\n                  className=\"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                >\r\n                  Close\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NDAFormsView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}